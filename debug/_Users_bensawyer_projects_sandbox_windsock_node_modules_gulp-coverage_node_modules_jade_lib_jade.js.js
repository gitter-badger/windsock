
// Instrumentation Header
{
    var fs = require('fs');
    var __statement_LXq72Q, __expression_XI7oM_, __block_fWQ3Qj;
    var store = require('/Users/bensawyer/projects/sandbox/windsock/node_modules/gulp-coverage/contrib/coverage_store.js');
    
    __statement_LXq72Q = function(i) {
        var fd = store.register('/Users/bensawyer/projects/sandbox/windsock/node_modules/gulp-coverage/node_modules/jade/lib/jade.js');
        fs.writeSync(fd, '{"statement": {"node": ' + i + '}},\n');
    }; 
    
    __expression_XI7oM_ = function(i) {
        var fd = store.register('/Users/bensawyer/projects/sandbox/windsock/node_modules/gulp-coverage/node_modules/jade/lib/jade.js');
        fs.writeSync(fd, '{"expression": {"node": ' + i + '}},\n');
    }; 
    
    __block_fWQ3Qj = function(i) {
        var fd = store.register('/Users/bensawyer/projects/sandbox/windsock/node_modules/gulp-coverage/node_modules/jade/lib/jade.js');
        fs.writeSync(fd, '{"block": ' + i + '},\n');
    }; 
    __intro_V7uEs9 = function(id, obj) {
        // console.log('__intro: ', id, ', obj.__instrumented_miss: ', obj.__instrumented_miss, ', obj.length: ', obj.length);
        (typeof obj === 'object' || typeof obj === 'function') &&
            Object.defineProperty && Object.defineProperty(obj, '__instrumented_miss', {enumerable: false, writable: true});
        obj.__instrumented_miss = obj.__instrumented_miss || [];
        if ('undefined' !== typeof obj && null !== obj && 'undefined' !== typeof obj.__instrumented_miss) {
            if (obj.length === 0) {
                // console.log('interim miss: ', id);
                obj.__instrumented_miss[id] = true;
            } else {
                obj.__instrumented_miss[id] = false;
            }
        }
        return obj;
    };
    function isProbablyChainable(obj, id) {
        return obj &&
            obj.__instrumented_miss[id] !== undefined &&
            'number' === typeof obj.length;
    }
    __extro_uwOWCD = function(id, obj) {
        var fd = store.register('/Users/bensawyer/projects/sandbox/windsock/node_modules/gulp-coverage/node_modules/jade/lib/jade.js');
        // console.log('__extro: ', id, ', obj.__instrumented_miss: ', obj.__instrumented_miss, ', obj.length: ', obj.length);
        if ('undefined' !== typeof obj && null !== obj && 'undefined' !== typeof obj.__instrumented_miss) {
            if (isProbablyChainable(obj, id) && obj.length === 0 && obj.__instrumented_miss[id]) {
                // if the call was not a "constructor" - i.e. it did not add things to the chainable
                // and it did not return anything from the chainable, it is a miss
                // console.log('miss: ', id);
            } else {
                fs.writeSync(fd, '{"chain": {"node": ' + id + '}},\n');
            }
            obj.__instrumented_miss[id] = undefined;
        } else {
            fs.writeSync(fd, '{"chain": {"node": ' + id + '}},\n');
        }
        return obj;
    };
};
////////////////////////

// Instrumented Code
{
    __statement_LXq72Q(0);
    'use strict';
}
{
    __statement_LXq72Q(1);
    var Parser = (__expression_XI7oM_(2), require('./parser')), Lexer = (__expression_XI7oM_(3), require('./lexer')), Compiler = (__expression_XI7oM_(4), require('./compiler')), runtime = (__expression_XI7oM_(5), require('./runtime')), addWith = (__expression_XI7oM_(6), require('with')), fs = (__expression_XI7oM_(7), require('fs'));
}
{
    __statement_LXq72Q(8);
    exports.selfClosing = (__expression_XI7oM_(9), require('./self-closing'));
}
{
    __statement_LXq72Q(10);
    exports.doctypes = (__expression_XI7oM_(11), require('./doctypes'));
}
{
    __statement_LXq72Q(12);
    exports.filters = (__expression_XI7oM_(13), require('./filters'));
}
{
    __statement_LXq72Q(14);
    exports.utils = (__expression_XI7oM_(15), require('./utils'));
}
{
    __statement_LXq72Q(16);
    exports.Compiler = Compiler;
}
{
    __statement_LXq72Q(17);
    exports.Parser = Parser;
}
{
    __statement_LXq72Q(18);
    exports.Lexer = Lexer;
}
{
    __statement_LXq72Q(19);
    exports.nodes = (__expression_XI7oM_(20), require('./nodes'));
}
{
    __statement_LXq72Q(21);
    exports.runtime = runtime;
}
{
    __statement_LXq72Q(22);
    exports.cache = {};
}
function parse(str, options) {
    __block_fWQ3Qj(0);
    try {
        __block_fWQ3Qj(1);
        {
            __statement_LXq72Q(23);
            var parser = new (__expression_XI7oM_(24), options.parser || (__expression_XI7oM_(25), Parser))(str, options.filename, options);
        }
        {
            __statement_LXq72Q(26);
            var compiler = new (__expression_XI7oM_(27), options.compiler || (__expression_XI7oM_(28), Compiler))(__extro_uwOWCD(29, __intro_V7uEs9(29, parser).parse()), options), js = __extro_uwOWCD(30, __intro_V7uEs9(30, compiler).compile());
        }
        if (options.debug) {
            __block_fWQ3Qj(2);
            {
                __statement_LXq72Q(31);
                __extro_uwOWCD(32, __intro_V7uEs9(32, console).error('\nCompiled Function:\n\n\u001b[90m%s\u001b[0m', __extro_uwOWCD(33, __intro_V7uEs9(33, js).replace(/^/gm, '  '))));
            }
        }
        {
            __statement_LXq72Q(34);
            var globals = (__expression_XI7oM_(37), options.globals && __extro_uwOWCD(38, __intro_V7uEs9(38, Array).isArray(options.globals))) ? (__expression_XI7oM_(35), options.globals) : (__expression_XI7oM_(36), []);
        }
        {
            __statement_LXq72Q(39);
            __extro_uwOWCD(40, __intro_V7uEs9(40, globals).push('jade'));
        }
        {
            __statement_LXq72Q(41);
            __extro_uwOWCD(42, __intro_V7uEs9(42, globals).push('jade_mixins'));
        }
        {
            __statement_LXq72Q(43);
            __extro_uwOWCD(44, __intro_V7uEs9(44, globals).push('jade_debug'));
        }
        {
            __statement_LXq72Q(45);
            __extro_uwOWCD(46, __intro_V7uEs9(46, globals).push('buf'));
        }
        return __expression_XI7oM_(47), (__expression_XI7oM_(48), (__expression_XI7oM_(49), (__expression_XI7oM_(50), (__expression_XI7oM_(51), (__expression_XI7oM_(52), '' + 'var buf = [];\n') + 'var jade_mixins = {};\n') + (options.self ? (__expression_XI7oM_(53), (__expression_XI7oM_(55), 'var self = locals || {};\n' + (__expression_XI7oM_(56), js))) : (__expression_XI7oM_(54), (__expression_XI7oM_(57), addWith('locals || {}', (__expression_XI7oM_(58), '\n' + (__expression_XI7oM_(59), js)), globals))))) + ';') + 'return buf.join("");');
    } catch (err) {
        __block_fWQ3Qj(3);
        {
            __statement_LXq72Q(60);
            parser = __extro_uwOWCD(61, __intro_V7uEs9(61, parser).context());
        }
        {
            __statement_LXq72Q(62);
            __extro_uwOWCD(63, __intro_V7uEs9(63, runtime).rethrow(err, parser.filename, parser.lexer.lineno, parser.input));
        }
    }
}
{
    __statement_LXq72Q(64);
    exports.compile = function (str, options) {
        __block_fWQ3Qj(4);
        {
            __statement_LXq72Q(65);
            var options = (__expression_XI7oM_(66), (__expression_XI7oM_(67), options) || {}), filename = options.filename ? (__expression_XI7oM_(68), __extro_uwOWCD(70, __intro_V7uEs9(70, JSON).stringify(options.filename))) : (__expression_XI7oM_(69), 'undefined'), fn;
        }
        {
            __statement_LXq72Q(71);
            str = (__expression_XI7oM_(72), String(str));
        }
        if (__expression_XI7oM_(73), options.compileDebug !== false) {
            __block_fWQ3Qj(5);
            {
                __statement_LXq72Q(74);
                fn = __extro_uwOWCD(75, __intro_V7uEs9(75, [
                    (__expression_XI7oM_(76), (__expression_XI7oM_(77), 'var jade_debug = [{ lineno: 1, filename: ' + (__expression_XI7oM_(78), filename)) + ' }];'),
                    'try {',
                    (__expression_XI7oM_(79), parse(str, options)),
                    '} catch (err) {',
                    (__expression_XI7oM_(80), (__expression_XI7oM_(81), '  jade.rethrow(err, jade_debug[0].filename, jade_debug[0].lineno' + ((__expression_XI7oM_(84), options.compileDebug === true) ? (__expression_XI7oM_(82), (__expression_XI7oM_(85), ',' + __extro_uwOWCD(86, __intro_V7uEs9(86, JSON).stringify(str)))) : (__expression_XI7oM_(83), ''))) + ');'),
                    '}'
                ]).join('\n'));
            }
        } else {
            __block_fWQ3Qj(6);
            {
                __statement_LXq72Q(87);
                fn = (__expression_XI7oM_(88), parse(str, options));
            }
        }
        {
            __statement_LXq72Q(89);
            fn = new Function('locals, jade', fn);
        }
        {
            __statement_LXq72Q(90);
            var res = function (locals) {
                __block_fWQ3Qj(7);
                return __expression_XI7oM_(91), (__expression_XI7oM_(92), fn(locals, __extro_uwOWCD(93, __intro_V7uEs9(93, Object).create(runtime))));
            };
        }
        if (options.client) {
            __block_fWQ3Qj(8);
            {
                __statement_LXq72Q(94);
                res.toString = function () {
                    __block_fWQ3Qj(9);
                    {
                        __statement_LXq72Q(95);
                        var err = new Error('The `client` option is deprecated, use `jade.compileClient`');
                    }
                    {
                        __statement_LXq72Q(96);
                        __extro_uwOWCD(97, __intro_V7uEs9(97, console).error((__expression_XI7oM_(98), err.stack || err.message)));
                    }
                    return __expression_XI7oM_(99), __extro_uwOWCD(100, __intro_V7uEs9(100, exports).compileClient(str, options));
                };
            }
        }
        return __expression_XI7oM_(101), res;
    };
}
{
    __statement_LXq72Q(102);
    exports.compileClient = function (str, options) {
        __block_fWQ3Qj(10);
        {
            __statement_LXq72Q(103);
            var options = (__expression_XI7oM_(104), (__expression_XI7oM_(105), options) || {}), filename = options.filename ? (__expression_XI7oM_(106), __extro_uwOWCD(108, __intro_V7uEs9(108, JSON).stringify(options.filename))) : (__expression_XI7oM_(107), 'undefined'), fn;
        }
        {
            __statement_LXq72Q(109);
            str = (__expression_XI7oM_(110), String(str));
        }
        if (options.compileDebug) {
            __block_fWQ3Qj(11);
            {
                __statement_LXq72Q(111);
                options.compileDebug = true;
            }
            {
                __statement_LXq72Q(112);
                fn = __extro_uwOWCD(113, __intro_V7uEs9(113, [
                    (__expression_XI7oM_(114), (__expression_XI7oM_(115), 'var jade_debug = [{ lineno: 1, filename: ' + (__expression_XI7oM_(116), filename)) + ' }];'),
                    'try {',
                    (__expression_XI7oM_(117), parse(str, options)),
                    '} catch (err) {',
                    (__expression_XI7oM_(118), (__expression_XI7oM_(119), '  jade.rethrow(err, jade_debug[0].filename, jade_debug[0].lineno, ' + __extro_uwOWCD(120, __intro_V7uEs9(120, JSON).stringify(str))) + ');'),
                    '}'
                ]).join('\n'));
            }
        } else {
            __block_fWQ3Qj(12);
            {
                __statement_LXq72Q(121);
                options.compileDebug = false;
            }
            {
                __statement_LXq72Q(122);
                fn = (__expression_XI7oM_(123), parse(str, options));
            }
        }
        return __expression_XI7oM_(124), (__expression_XI7oM_(125), (__expression_XI7oM_(126), 'function template(locals) {\n' + (__expression_XI7oM_(127), fn)) + '\n}');
    };
}
{
    __statement_LXq72Q(128);
    exports.render = function (str, options, fn) {
        __block_fWQ3Qj(13);
        if (__expression_XI7oM_(129), 'function' == (__expression_XI7oM_(130), typeof options)) {
            __block_fWQ3Qj(14);
            {
                __statement_LXq72Q(131);
                fn = options, options = undefined;
            }
        }
        if (__expression_XI7oM_(132), (__expression_XI7oM_(133), typeof fn) === 'function') {
            __block_fWQ3Qj(15);
            {
                __statement_LXq72Q(134);
                var res;
            }
            try {
                __block_fWQ3Qj(16);
                {
                    __statement_LXq72Q(135);
                    res = __extro_uwOWCD(136, __intro_V7uEs9(136, exports).render(str, options));
                }
            } catch (ex) {
                __block_fWQ3Qj(17);
                return __expression_XI7oM_(137), (__expression_XI7oM_(138), fn(ex));
            }
            return __expression_XI7oM_(139), (__expression_XI7oM_(140), fn(null, res));
        }
        {
            __statement_LXq72Q(141);
            options = (__expression_XI7oM_(142), (__expression_XI7oM_(143), options) || {});
        }
        if (__expression_XI7oM_(144), options.cache && (__expression_XI7oM_(145), !options.filename)) {
            __block_fWQ3Qj(18);
            {
                __statement_LXq72Q(146);
                throw new Error('the "filename" option is required for caching');
            }
        }
        {
            __statement_LXq72Q(147);
            var path = options.filename;
        }
        {
            __statement_LXq72Q(148);
            var tmpl = options.cache ? (__expression_XI7oM_(149), (__expression_XI7oM_(151), exports.cache[path] || (exports.cache[path] = __extro_uwOWCD(152, __intro_V7uEs9(152, exports).compile(str, options))))) : (__expression_XI7oM_(150), __extro_uwOWCD(153, __intro_V7uEs9(153, exports).compile(str, options)));
        }
        return __expression_XI7oM_(154), (__expression_XI7oM_(155), tmpl(options));
    };
}
{
    __statement_LXq72Q(156);
    exports.renderFile = function (path, options, fn) {
        __block_fWQ3Qj(19);
        if (__expression_XI7oM_(157), 'function' == (__expression_XI7oM_(158), typeof options)) {
            __block_fWQ3Qj(20);
            {
                __statement_LXq72Q(159);
                fn = options, options = undefined;
            }
        }
        if (__expression_XI7oM_(160), (__expression_XI7oM_(161), typeof fn) === 'function') {
            __block_fWQ3Qj(21);
            {
                __statement_LXq72Q(162);
                var res;
            }
            try {
                __block_fWQ3Qj(22);
                {
                    __statement_LXq72Q(163);
                    res = __extro_uwOWCD(164, __intro_V7uEs9(164, exports).renderFile(path, options));
                }
            } catch (ex) {
                __block_fWQ3Qj(23);
                return __expression_XI7oM_(165), (__expression_XI7oM_(166), fn(ex));
            }
            return __expression_XI7oM_(167), (__expression_XI7oM_(168), fn(null, res));
        }
        {
            __statement_LXq72Q(169);
            options = (__expression_XI7oM_(170), (__expression_XI7oM_(171), options) || {});
        }
        {
            __statement_LXq72Q(172);
            var key = (__expression_XI7oM_(173), (__expression_XI7oM_(174), path) + ':string');
        }
        {
            __statement_LXq72Q(175);
            options.filename = path;
        }
        {
            __statement_LXq72Q(176);
            var str = options.cache ? (__expression_XI7oM_(177), (__expression_XI7oM_(179), exports.cache[key] || (exports.cache[key] = __extro_uwOWCD(180, __intro_V7uEs9(180, fs).readFileSync(path, 'utf8'))))) : (__expression_XI7oM_(178), __extro_uwOWCD(181, __intro_V7uEs9(181, fs).readFileSync(path, 'utf8')));
        }
        return __expression_XI7oM_(182), __extro_uwOWCD(183, __intro_V7uEs9(183, exports).render(str, options));
    };
}
{
    __statement_LXq72Q(184);
    exports.compileFileClient = function (path, options) {
        __block_fWQ3Qj(24);
        {
            __statement_LXq72Q(185);
            options = (__expression_XI7oM_(186), (__expression_XI7oM_(187), options) || {});
        }
        {
            __statement_LXq72Q(188);
            var key = (__expression_XI7oM_(189), (__expression_XI7oM_(190), path) + ':string');
        }
        {
            __statement_LXq72Q(191);
            options.filename = path;
        }
        {
            __statement_LXq72Q(192);
            var str = options.cache ? (__expression_XI7oM_(193), (__expression_XI7oM_(195), exports.cache[key] || (exports.cache[key] = __extro_uwOWCD(196, __intro_V7uEs9(196, fs).readFileSync(path, 'utf8'))))) : (__expression_XI7oM_(194), __extro_uwOWCD(197, __intro_V7uEs9(197, fs).readFileSync(path, 'utf8')));
        }
        return __expression_XI7oM_(198), __extro_uwOWCD(199, __intro_V7uEs9(199, exports).compileClient(str, options));
    };
}
{
    __statement_LXq72Q(200);
    exports.__express = exports.renderFile;
}