!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.windsock=t()}(this,function(){"use strict";function e(e){return e.charAt(0).toUpperCase()+e.slice(1)}function t(t,n){switch(n){case"empty":return 0===Object.keys(t).length;case"undefined":return"undefined"==typeof t;case"null":return null===t;default:return Object.prototype.toString.call(t)==="[object "+e(n)+"]"}}function n(e){for(var t=1,n=arguments.length;n>t;t++)for(var r in arguments[t])e[r]=arguments[t][r];return e}function r(e){var n={};return Object.keys(e).forEach(function(r){n[r]=t(e[r],"object")?n(e[r]):e[r]}),n}function i(e,t){for(var n in t)if(e[n]!==t[n])return!1;return!0}function o(){}function s(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return Object.defineProperty(t,"parent",{value:e,enumerable:!1,writable:!1,configurable:!1}),t}function a(e){var t=arguments.length<=1||void 0===arguments[1]?[]:arguments[1];return Object.defineProperty(t,"parent",{value:e,enumerable:!1,writable:!1,configurable:!1}),t}function u(e,t){return t instanceof ve||t instanceof pe?!1:t.name===e}function c(e,t){return t instanceof ve||t instanceof pe?!1:i(t.attributes,e)}function l(e){if(t(e,"function"))return e;if(t(e,"string"))return u.bind(null,e);if(t(e,"object"))return c.bind(null,e);throw new Error("specified query type not supported")}function d(e){return e instanceof ve}function f(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return Object.defineProperty(t,"parent",{value:e,enumerable:!1,writable:!1,configurable:!1}),t}function h(e,n){var r,i=Ee.recursive(n),o=g(e);if(e._observers?n.observers.forEach(function(t){e._observers.exists(t)||e._observers.add(t)}):(r={_observers:{value:n,configurable:!1}},o.forEach(function(t){y(t,e[t],r)}),t(e,"array")?p(e,r):v(e,r),Object.defineProperties(e,r)),i.observers.length)for(var s=0,a=o.length;a>s;s++)b(e[o[s]])&&h(e[o[s]],i)}function v(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];t.add={value:function(e,t){m(this,e,t)}},t["delete"]={value:function(e){w(this,e)}}}function p(e){for(var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],n=function(e,n){t[Oe[e]]={value:function(){k({args:Array.prototype.slice.call(arguments),method:Oe[e],target:this})}}},r=0,i=Oe.length;i>r;r++)n(r,i)}function b(e){return t(e,"array")||t(e,"object")}function g(e){return Object.getOwnPropertyNames(e).filter(function(t){return Object.getOwnPropertyDescriptor(e,t).configurable})}function y(e,t){var n=arguments.length<=2||void 0===arguments[2]?{}:arguments[2];return n[e]={get:function(){return t},set:function(n){var r=new Ce({type:e,target:this,method:"set",oldValue:t,newValue:n,args:[]});this._observers.recursiveExists()&&b(n)&&h(n,Ee.recursive(this._observers)),t&&t._observers&&_(this,t._observers),t=n,this._observers.dispatch(r)},enumerable:!0,configurable:!0},n}function m(e,n,r){if(!t(e[n],"undefined"))throw new Error("Failed to add "+n+" already defined");var i=new Ce({type:n,target:e,method:"add",oldValue:e[n],newValue:r,args:Array.prototype.slice.call(arguments,1)});e._observers.recursiveExists()&&b(r)&&h(r,Ee.recursive(e._observers)),Object.defineProperties(e,y(n,r)),e._observers.dispatch(i)}function w(e,n){if(t(e[n],"undefined"))throw new Error("Failed to delete "+n+" does not exist");var r=new Ce({type:n,target:e,method:"delete",oldValue:e[n],newValue:void 0,args:Array.prototype.slice.call(arguments,1)});e[n]&&e[n]._observers&&_(e,e[n]._observers),delete e[n],e._observers.dispatch(r)}function k(e){var t=e.target,n=e.args,r=e.method,i=new Ce({type:void 0,target:t,method:r,oldValue:void 0,newValue:void 0,args:n});switch(r){case"fill":i.type=n.splice(1),i.oldValue=t.slice(n[1],n[2]);break;case"pop":i.type=t.length-1,i.oldValue=t.slice(t.length-1);break;case"push":i.type=t.length,i.newValue=n;break;case"shift":i.type=0,i.oldValue=t.slice(0,1);break;case"unshift":i.type=0,i.newValue=n;break;case"splice":i.type=n[0],n[1]&&(i.oldValue=t.slice(n[0],n[0]+n[1])),i.newValue=n.slice(2)}t._observers.recursiveExists()&&i.newValue.forEach(function(e){b(e)&&h(e,Ee.recursive(t._observers))}),i.oldValue&&i.oldValue.forEach(function(e){e&&e._observers&&_(t,e._observers)}),Array.prototype[r].apply(t,e.args),t._observers.dispatch(i)}function O(e,t){g(e).forEach(function(n){O(e[n],t),e[n]._observers&&e[n]._observers.remove(t)})}function _(e,t){e._observers.recursive().forEach(function(e){t.remove(e)})}function C(e,n){var r,i=je.recursive(n),o=j(e);if(e._observers?n.observers.forEach(function(t){e._observers.exists(t)||e._observers.add(t)}):(r={_observers:{value:n,configurable:!1}},o.forEach(function(t){N(t,e[t],r)}),t(e,"array")?V(e,r):E(e,r),Object.defineProperties(e,r)),i.observers.length)for(var s=0,a=o.length;a>s;s++)x(e[o[s]])&&C(e[o[s]],i)}function E(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];t.add={value:function(e,t){D(this,e,t)}},t["delete"]={value:function(e){P(this,e)}}}function V(e){for(var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],n=function(e,n){t[Ve[e]]={value:function(){F({args:Array.prototype.slice.call(arguments),method:Ve[e],target:this})}}},r=0,i=Ve.length;i>r;r++)n(r,i)}function x(e){return t(e,"array")||t(e,"object")}function j(e){return Object.getOwnPropertyNames(e).filter(function(t){return Object.getOwnPropertyDescriptor(e,t).configurable})}function N(e,t){var n=arguments.length<=2||void 0===arguments[2]?{}:arguments[2];return n[e]={get:function(){return t},set:function(n){var r=new xe({type:e,target:this,method:"set",oldValue:t,newValue:n,args:[]});this._observers.recursiveExists()&&x(n)&&C(n,je.recursive(this._observers)),t&&t._observers&&A(this,t._observers),t=n,this._observers.dispatch(r)},enumerable:!0,configurable:!0},n}function D(e,n,r){if(!t(e[n],"undefined"))throw new Error("Failed to add "+n+" already defined");var i=new xe({type:n,target:e,method:"add",oldValue:e[n],newValue:r,args:Array.prototype.slice.call(arguments,1)});e._observers.recursiveExists()&&x(r)&&C(r,je.recursive(e._observers)),Object.defineProperties(e,N(n,r)),e._observers.dispatch(i)}function P(e,n){if(t(e[n],"undefined"))throw new Error("Failed to delete "+n+" does not exist");var r=new xe({type:n,target:e,method:"delete",oldValue:e[n],newValue:void 0,args:Array.prototype.slice.call(arguments,1)});e[n]&&e[n]._observers&&A(e,e[n]._observers),delete e[n],e._observers.dispatch(r)}function F(e){var t=e.target,n=e.args,r=e.method,i=new xe({type:void 0,target:t,method:r,oldValue:void 0,newValue:void 0,args:n});switch(r){case"fill":i.type=n.splice(1),i.oldValue=t.slice(n[1],n[2]);break;case"pop":i.type=t.length-1,i.oldValue=t.slice(t.length-1);break;case"push":i.type=t.length,i.newValue=n;break;case"shift":i.type=0,i.oldValue=t.slice(0,1);break;case"unshift":i.type=0,i.newValue=n;break;case"splice":i.type=n[0],n[1]&&(i.oldValue=t.slice(n[0],n[0]+n[1])),i.newValue=n.slice(2)}t._observers.recursiveExists()&&i.newValue.forEach(function(e){x(e)&&C(e,je.recursive(t._observers))}),i.oldValue&&i.oldValue.forEach(function(e){e&&e._observers&&A(t,e._observers)}),Array.prototype[r].apply(t,e.args),t._observers.dispatch(i)}function M(e,t){j(e).forEach(function(n){M(e[n],t),e[n]._observers&&e[n]._observers.remove(t)})}function A(e,t){e._observers.recursive().forEach(function(e){t.remove(e)})}function S(e,t){var n=t.instance;n.traversal(t.data,e);n.transform.bind(e,t),e.bindings.push(t)}function T(e){return t(e,"function")?e:t(e,"string")?I.bind(null,e):void 0}function I(e,t,n){for(var r=e.split("."),i=r.slice(-1)[0],o=void 0,s=t;r.length;)o=s,s=R(s,r);return{key:i,parent:o,value:s}}function R(e,t){var n=t.shift();if("undefined"==typeof e[n])throw new Error("Failed to resolve '"+n+"' on target");return e[n]}function q(e){for(var t=0,n=Fe.length;n>t;t++)if(Fe[t]===e)return!0;return!1}function z(e){return!/[^\t\n\r ]/.test(e)}function B(e){return e.toString().replace(/[\t\n\r]|\s{2,}/g,"")}function L(e,t){if(e.hasChildNodes())for(var n=e.childNodes,r=0,i=n.length;i>r;r++)J(n[r],t)}function U(e){var t={},n=/(([\w\-]+([\s]|[\/>]))|([\w\-]+)=["']([^"']+)["'])/g,r=e.match(n);r.length>1&&(t.attributes={});for(var i=0,o=r.length;o>i;i++){var s=r[i].split("=");0===i?t.name=s[0].replace(/[\/>]/g,"").trim():s.length>1?t.attributes[s[0].trim()]=s[1].replace(/["'>]/g,"").trim():t.attributes[s[0].replace(/[>]/g,"").trim()]=null}return t}function J(e,t){var n;if(-1===Me.indexOf(e.nodeName.toLowerCase())){if(e instanceof DocumentFragment)return void L(e,t);if(3===e.nodeType){if(z(e.nodeValue)||!B(e.nodeValue).length)return;return t({type:"text",textNode:e,value:B(e.nodeValue)})}n={documentElement:e,name:e.nodeName.toLowerCase(),"void":q(e.nodeName.toLowerCase())},e.attributes.length&&(n.attributes={},e.attributes.forEach(function(e){n.attributes[e.name]=e.value})),n.type="start",n["void"]||t(n),L(e,t),n.attributes&&!n["void"]&&delete n.attributes,n.type="end",t(n)}}function G(e,t){var n,r,i;for(e=B(e);e;){var o=e.indexOf("<");o>=0?(o>0&&t({type:"text",value:e.substring(0,o)}),e=e.substring(o),n=e.indexOf(">")+1,r=e.substring(0,n),i=U(r),i["void"]="/"===e[r.length-2]||q(i.name),"!"===r[1]?n=e.indexOf("-->")+1:"/"===r[1]||i["void"]?(i.type="end",t(i)):(i.type="start",t(i)),e=e.substring(n)):(t({type:"text",value:e}),e=null)}}function H(e,r){var i,o=1;for((t(e[0],"array")||t(e[0],"object"))&&"undefined"!=typeof e[0].length?H(e[0],r):(i={name:e[0],"void":q(e[0]),type:"start"},e.length>1&&"[object Object]"===e[1].toString()&&(o++,i.attributes=n({},e[1])),i["void"]||r(i));o<e.length;)t(e[o],"string")||e[o].value?r({type:"text",value:e.value||e[o]}):H(e[o],r),o++;"undefined"!=typeof i&&(i.attributes&&!i["void"]&&delete i.attributes,i.type="end",r(i))}function K(e){function n(e){var t;switch(e.type){case"text":i.append(new ve(e.value));break;case"start":t=new be(e.name,e.attributes),i.append(t),i=t;break;case"end":e["void"]?(t=new be(e.name,e.attributes,e["void"]),i.append(t)):i.parent&&(i=i.parent)}}var r,i=new pe;return t(e,"string")?G(e,n):e.nodeName?document.contains(e)?(r=e,J(e.cloneNode(!0),n)):J(e,n):H(e,n),i=1===i.children.length?i.children[0]:i,i.transclude=r,i}function Q(){Ae=null,Se=!1,Te=!1,Ie=[]}function W(){Te=!0;for(var e=0;e<Ie.length;e++)Ie[e].call();Q()}function X(e){return Ie.push(e),Se||(Ae=ce(W),Se=!0),Ae}function Y(e){for(;e;){if(e.DOMNode)return e.DOMNode.namespaceURI;if("svg"===e.name)return Re.svg;e=e.parent instanceof be?e.parent:!1}return Re.html}function Z(e){var t=e.indexOf(":"),n=null;return t>=0&&(n=Re[e.substring(0,t)]||null),n}function $(e){"textContent"===e.type&&e.oldValue!==e.newValue&&X(function(){e.target.parent.DOMNode.textContent=e.newValue})}function ee(e){var t=void 0;if(e.oldValue!==e.newValue)switch(t=e.target.parent,e.method){case"delete":X(function(){t.DOMNode.removeAttributeNS(Z(e.type),e.type)});break;case"add":case"set":X(function(){t.DOMNode.setAttributeNS(Z(e.type),e.type,e.newValue)})}}function te(e){var t=e.target.parent.DOMNode;switch(e.method){case"push":e.newValue.forEach(function(e){X(function(){t.appendChild(e.DOMNode)})});break;case"unshift":e.newValue.forEach(function(e){X(function(){t.insertBefore(e.DOMNode,t.firstChild)})});break;case"splice":e.oldValue&&e.oldValue.length&&X(function(){t.removeChild(e.oldValue[0].DOMNode)}),3===e.args.length&&X(function(){t.insertBefore(e.newValue[0].DOMNode,t.childNodes[e.type])})}}function ne(e){var t=void 0,n=void 0,r=void 0;if(e instanceof ve)e.DOMNode=document.createTextNode(e.value.textContent),t=new _e($),t.observe(e.value),e.observers.push(t);else if(e instanceof be)e.DOMNode=document.createElementNS(Y(e),e.name),Object.keys(e.attributes).forEach(function(t){e.DOMNode.setAttributeNS(Z(t),t,e.attributes[t])}),n=new _e(ee),r=new _e(te),n.observe(e.attributes),r.observe(e.children),e.observers.push(n),e.observers.push(r);else{if(!(e instanceof pe))throw new Error("Unspecified node instance");e.DOMNode=document.createDocumentFragment(),r=new _e(te),r.observe(e.children),e.observers.push(r)}e.parent&&e.parent.DOMNode.appendChild(e.DOMNode)}function re(e){for(var t=0,n=e.bindings.length;n>t;t++)e.bindings[t].instance.compile(e,e.bindings[t])}function ie(e){if(!e instanceof he)throw new Error("Template param must be of type Node");if(e.compiled===!0)throw new Error("Specified template is already compiled");var t=e.clone(!0);return oe(t),t}function oe(e){"undefined"!=typeof document&&ne(e),re(e),e.compiled=!0,e.children&&e.children.forEach(oe)}function se(e){var t=arguments.length<=1||void 0===arguments[1]?!1:arguments[1],n=void 0;if(!e instanceof he)throw new Error("Node param must be of type Node");return n=e.clone(t),e.compiled===!0&&(n=ie(n)),n}function ae(e,t){if("undefined"==typeof document)throw new Error("transclude requires a document");if(!e.transclude&&!t)throw new Error("unspecified transclusion target");t=e.transclude||t,t.parentNode.insertBefore(e.DOMNode,t),t.parentNode.removeChild(t),e.transclude=void 0}var ue={};ue.classCallCheck=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},ue.createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),ue.get=function ze(e,t,n){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,t);if(void 0===r){var i=Object.getPrototypeOf(e);return null===i?void 0:ze(i,t,n)}if("value"in r)return r.value;var o=r.get;if(void 0!==o)return o.call(n)},ue.inherits=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},ue.possibleConstructorReturn=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t};var ce,le,de="undefined"!=typeof process&&process.nextTick?process.nextTick:setTimeout;"undefined"!=typeof window&&window.requestAnimationFrame?(ce=window.requestAnimationFrame,le=window.cancelAnimationFrame):(ce=setTimeout,le=clearTimeout);var fe=Object.freeze({get paint(){return ce},get cancelPaint(){return le},tick:de,capitalize:e,is:t,extend:n,clone:r,match:i,noop:o}),he=function(){function e(){ue.classCallCheck(this,e),this.compiled=!1,this.transclude=void 0,this.DOMNode=void 0,this.observers=[],this.bindings=[]}return ue.createClass(e,[{key:"destroy",value:function(){for(this.compiled=!1,this.transclude=void 0,this.DOMNode=void 0;this.observers.length;)this.observers.pop().disconnect();this.bindings=[]}},{key:"clone",value:function(){var t=new e;return t.transclude=this.transclude,t.bindings=this.bindings,t}},{key:"toJSON",value:function(){return this.jsonml}},{key:"valueOf",value:function(){return JSON.stringify(this)}},{key:"toString",value:function(){return this.html}},{key:"jsonml",get:function(){return""}},{key:"html",get:function(){return""}}]),e}(),ve=function(e){function n(e){ue.classCallCheck(this,n);var t=ue.possibleConstructorReturn(this,Object.getPrototypeOf(n).call(this));return t.value={textContent:e},s(t,t.value),t.parent=void 0,t}return ue.inherits(n,e),ue.createClass(n,[{key:"destroy",value:function(){ue.get(Object.getPrototypeOf(n.prototype),"destroy",this).call(this),t(this.parent,"undefined")||this.remove()}},{key:"clone",value:function(){var e=new n(this.value.textContent);return e.transclude=this.transclude,e.bindings=this.bindings,e}},{key:"remove",value:function(){if(t(this.parent,"undefined"))throw new Error("Failed to remove node");this.parent.children.splice(this.parent.children.indexOf(this),1),this.parent=void 0}},{key:"jsonml",get:function(){return this.value.textContent}},{key:"html",get:function(){return this.value.textContent}},{key:"text",get:function(){return this.value.textContent},set:function(e){this.value.textContent=e}}]),n}(he),pe=function(e){function n(){ue.classCallCheck(this,n);var e=ue.possibleConstructorReturn(this,Object.getPrototypeOf(n).call(this));return e.children=a(e),e}return ue.inherits(n,e),ue.createClass(n,[{key:"destroy",value:function(){ue.get(Object.getPrototypeOf(n.prototype),"destroy",this).call(this);for(var e=this.children.length;e;)e--,this.children[e].destroy()}},{key:"clone",value:function(){var e=arguments.length<=0||void 0===arguments[0]?!1:arguments[0],t=new n;return e&&this.children.length&&this.children.forEach(function(e){t.append(e.clone(!0))}),t.transclude=this.transclude,t.bindings=this.bindings,t}},{key:"append",value:function(e){if(this.compiled!==e.compiled)throw new Error("Node compiled value does not match");t(e.parent,"undefined")||e.remove(),e.parent=this,this.children.push(e)}},{key:"prepend",value:function(e){if(this.compiled!==e.compiled)throw new Error("Node compiled value does not match");t(e.parent,"undefined")||e.remove(),e.parent=this,this.children.unshift(e)}},{key:"insert",value:function(e,n){if(this.compiled!==e.compiled)throw new Error("Node compiled value does not match");t(e.parent,"undefined")||e.remove(),e.parent=this,this.children.splice(n,0,e)}},{key:"find",value:function(e){for(var n=l(e),r=void 0,i=0,o=this.children.length;o>i;i++){if(n(this.children[i]))return this.children[i];if(!t(this.children[i].find,"undefined")&&(r=this.children[i].find(n),!t(r,"undefined")))return r}}},{key:"filter",value:function(e){for(var n=l(e),r=[],i=0,o=this.children.length;o>i;i++)n(this.children[i])&&r.push(this.children[i]),t(this.children[i].find,"undefined")||(r=r.concat(this.children[i].find(n)));return r}},{key:"text",value:function(){return this.filter(d).join("")}},{key:"jsonml",get:function(){throw new Error("Cannot convert to jsonml")}},{key:"html",get:function(){return this.children.map(function(e){return e.html}).join("")}}]),n}(he),be=function(e){function n(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],r=arguments.length<=2||void 0===arguments[2]?!1:arguments[2];if(ue.classCallCheck(this,n),!e)throw new Error("Failed to instantiate Element invalid name specified");var i=ue.possibleConstructorReturn(this,Object.getPrototypeOf(n).call(this));return i.name=e,i.attributes=f(i,t),i.empty=r,i}return ue.inherits(n,e),ue.createClass(n,[{key:"destroy",value:function(){ue.get(Object.getPrototypeOf(n.prototype),"destroy",this).call(this),t(this.parent,"undefined")||this.remove(),this.attributes=f(this),this.empty=!1}},{key:"clone",value:function(){var e=arguments.length<=0||void 0===arguments[0]?!1:arguments[0],t=new n(this.name,r(this.attributes));return e&&this.children.length&&this.children.forEach(function(e){t.append(e.clone(!0))}),t.transclude=this.transclude,t.bindings=this.bindings,t}},{key:"remove",value:function(){if(t(this.parent,"undefined"))throw new Error("Failed to remove node");this.parent.children.splice(this.parent.children.indexOf(this),1),this.parent=void 0}},{key:"jsonml",get:function(){var e=[];e.push(this.name),t(this.attributes,"empty")===!1&&e.push(r(this.attributes));for(var n=0,i=this.children.length;i>n;n++)e.push(this.children[n].jsonml);return e}},{key:"html",get:function(){var e=this,t=[],n=Object.keys(this.attributes);if(t.push("<"+this.name),n.length&&(t.push(" "),t=t.concat(n.map(function(t){return e.attributes[t]&&(t+='="'+e.attributes[t]+'"'),t}))),this.empty)t.push("/>");else{t.push(">");for(var r=0,i=this.children.length;i>r;r++)t.push(this.children[r].html);t.push("</"+this.name+">")}return t.join("")}}]),n}(pe),ge=Object.freeze({Node:he,Text:ve,Fragment:pe,Element:be}),ye=function(){function e(){ue.classCallCheck(this,e)}return ue.createClass(e,[{key:"bind",value:function(){}},{key:"update",value:function(){}}]),e}(),me=function(e){function t(){return ue.classCallCheck(this,t),ue.possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this))}return ue.inherits(t,e),ue.createClass(t,[{key:"bind",value:function(e,t){e.value.textContent=t.toString()}},{key:"update",value:function(e,t){var n=void 0;if(t.newValue!==t.oldValue)switch(t.method){case"delete":n=e.parent,e.remove(),e.parent=n;break;case"add":e.parent&&e.parent.append(e);case"set":e.value.textContent=t.newValue.toString()}}}]),t}(ye),we=function(e){function t(){return ue.classCallCheck(this,t),ue.possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this))}return ue.inherits(t,e),ue.createClass(t,[{key:"bind",value:function(e,t){var n=void 0;!!t==!1&&e.parent&&(n=e.parent,e.index=n.children.indexOf(e),e.remove(),e.parent=n)}},{key:"update",value:function(e,t){var n=void 0;t.newValue!==t.oldValue&&e.parent&&(t.newValue?e.parent.insert(e,e.index):(n=e.parent,e.index=n.children.indexOf(e),e.remove(),e.parent=n))}}]),t}(ye),ke=Object.freeze({TextTransform:me,IfTransform:we}),Oe=["fill","pop","push","shift","splice","unshift"],_e=function(){function e(n){if(ue.classCallCheck(this,e),t(n,"undefined"))throw new Error("Failed to instantiate missing callback");if(!t(n,"function"))throw new Error("Invalid callback specified");this.callback=n,this._target=void 0,this._config=void 0}return ue.createClass(e,[{key:"observe",value:function(e){var n,r=arguments.length<=1||void 0===arguments[1]?{recursive:!1}:arguments[1];if(!b(e))throw new Error("Failed to observe not a valid target");if(t(r.recursive,"undefined"))throw new Error("Invalid config specified");n=new Ee,n.add(this),this._target=e,this._config=r,h(e,n)}},{key:"disconnect",value:function(){this._target&&(this._config.recursive&&O(this._target,this),this._target._observers.remove(this)),this._target=void 0,this._config=void 0}}]),e}(),Ce=function Be(e){ue.classCallCheck(this,Be),this.type=e.type,this.target=e.target,this.method=e.method,this.args=e.args,this.newValue=e.newValue,this.oldValue=e.oldValue},Ee=function(){function e(){var t=arguments.length<=0||void 0===arguments[0]?[]:arguments[0];ue.classCallCheck(this,e),this.observers=t}return ue.createClass(e,[{key:"dispatch",value:function(e){if(!e instanceof Ce)throw new Error("Invalid record specified");this.observers.forEach(function(t){t.callback(e)})}},{key:"exists",value:function(e){return-1!==this.observers.indexOf(e)}},{key:"add",value:function(e){return this.observers.push(e)}},{key:"remove",value:function(e){var t=this.observers.indexOf(e);return-1!==t&&this.observers.splice(t,1),t}},{key:"recursive",value:function(){return this.observers.filter(function(e){return e._config.recursive})}},{key:"recursiveExists",value:function(){for(var e=0,t=this.observers.length;t>e;e++)if(this.observers[e]._config.recursive)return!0;return!1}}],[{key:"recursive",value:function(t){if(!t instanceof e)throw new Error("Invalid list specified");return new e(t.recursive())}}]),e}(),Ve=["fill","pop","push","shift","splice","unshift"],xe=(function(){function e(n){if(ue.classCallCheck(this,e),t(n,"undefined"))throw new Error("Failed to instantiate missing callback");if(!t(n,"function"))throw new Error("Invalid callback specified");this.callback=n,this._target=void 0,this._config=void 0}return ue.createClass(e,[{key:"observe",value:function(e){var n,r=arguments.length<=1||void 0===arguments[1]?{recursive:!1}:arguments[1];if(!x(e))throw new Error("Failed to observe not a valid target");if(t(r.recursive,"undefined"))throw new Error("Invalid config specified");n=new je,n.add(this),this._target=e,this._config=r,C(e,n)}},{key:"disconnect",value:function(){this._target&&(this._config.recursive&&M(this._target,this),this._target._observers.remove(this)),this._target=void 0,this._config=void 0}}]),e}(),function Le(e){ue.classCallCheck(this,Le),this.type=e.type,this.target=e.target,this.method=e.method,this.args=e.args,this.newValue=e.newValue,this.oldValue=e.oldValue}),je=function(){function e(){var t=arguments.length<=0||void 0===arguments[0]?[]:arguments[0];ue.classCallCheck(this,e),this.observers=t}return ue.createClass(e,[{key:"dispatch",value:function(e){if(!e instanceof xe)throw new Error("Invalid record specified");this.observers.forEach(function(t){t.callback(e)})}},{key:"exists",value:function(e){return-1!==this.observers.indexOf(e)}},{key:"add",value:function(e){return this.observers.push(e)}},{key:"remove",value:function(e){var t=this.observers.indexOf(e);return-1!==t&&this.observers.splice(t,1),t}},{key:"recursive",value:function(){return this.observers.filter(function(e){return e._config.recursive})}},{key:"recursiveExists",value:function(){for(var e=0,t=this.observers.length;t>e;e++)if(this.observers[e]._config.recursive)return!0;return!1}}],[{key:"recursive",value:function(t){if(!t instanceof e)throw new Error("Invalid list specified");return new e(t.recursive())}}]),e}(),Ne=function(){function e(t,n){ue.classCallCheck(this,e),this.traversal=T(t),this.transform=n}return ue.createClass(e,[{key:"render",value:function(e,n){var r={data:n,instance:this};if(t(e,"array"))for(var i=0,o=e.length;o>i;i++)S(e[i],r);else S(e,r)}},{key:"compile",value:function(e,t){}}]),e}(),De=function(){function e(){ue.classCallCheck(this,e),this.listeners=[]}return ue.createClass(e,[{key:"add",value:function(e){this.listeners.push(e)}},{key:"remove",value:function(e){return e?this.listeners.splice(this.listeners.indexOf(e),1):void(this.listeners=[])}},{key:"dispatch",value:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];return this.listeners.map(function(t){return t.apply(e,n)})}}]),e}(),Pe=function(){function e(){var t=this,n=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],r=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];ue.classCallCheck(this,e),this._state=n,this._mutations={},Object.keys(r).forEach(function(e){t._mutations[e]=new De,t._mutations[e].add(r[e])})}return ue.createClass(e,[{key:"dispatch",value:function(e){var t=this._mutations[e];if(!t)throw new Error(e+" mutation does not exist");for(var n=arguments.length,r=Array(n>1?n-1:0),i=1;n>i;i++)r[i-1]=arguments[i];t.dispatch(this.state,r)}}]),e}(),Fe=["area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"],Me=["script"],Ae=void 0,Se=void 0,Te=void 0,Ie=void 0;Q();var Re={html:"http://www.w3.org/1999/xhtml",svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink"},qe={version:"0.1.14",util:fe,vdom:ge,transforms:ke,Observer:_e,Transform:ye,Bind:Ne,Store:Pe,parse:K,compile:ie,clone:se,transclude:ae};return qe});