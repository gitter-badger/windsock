!function(){"use strict";function e(e){return e.replace(/\//g,"")}function t(n,r){if(r)return void(t.module[e(n)]=r);var i=Object.create(null),o=i.exports=Object.create(null);if(n=n.replace(/[\/.]/g,""),!t.module[n])throw new Error("failed to resolve module path: "+n);return t.module[n].call(this,i,o),i.exports}t.module=Object.create(null),t("batch",function(e){function n(e){this._done(),this.callback=e}var r=t("./util").nextPaint;n.prototype={add:function(e){this.queue.push(e),this.requested||(this.id=r(this._run,this),this.requested=!0)},cancel:function(){"undefined"!=typeof window&&window.cancelAnimationFrame&&window.cancelAnimationFrame(this.id),this._done()},_run:function(){this.running=!0;for(var e=0;e<this.queue.length;e++)this.queue[e].call(this);this._done()},_done:function(){this.queue=[],this.requested=!1,this.running=!1,this.id=null,this.callback&&this.callback.call(this)}},e.exports=n}),t("binding",function(e){function n(e){this.options=e||{}}var r=t("./util"),i=t("./signals"),o=r.noop,s=r.merge,a=(r.extend,r.each),u=r.accessors,c=Object.defineProperty;n.prototype={},n.create=function(e){var t=Object.create(Object.prototype,{update:{value:new i,enumerable:!1,writable:!0}});return e=s({view:null,model:null,directive:o},e||Object.create(null)),a(e,function(e,n){c(t,n,u(e,function(e,n){t.update.dispatch(e,n)},{enumerable:!0}))}),t},e.exports=n}),t("directive",function(e){function n(){}var r=t("./util"),i=r.extend;n.extend=function(e){var t=e.prototype.constructor;return t.prototype=i(Object.create(n.prototype),e.prototype),t},n.prototype.init=function(e,t){this.view=e,this.model=t},n.prototype.update=function(){},n.prototype.bind=function(){this.model._observers.add(this.update,this)},n.prototype.destroy=function(){this.model._observers.remove()},e.exports=n}),t("node",function(e){var t=Object.defineProperties,n={fragment:function(e){return t([],{documentNode:{value:e||{},enumerable:!1,writable:!0}})},element:function(e,r,i){var o=t(n.fragment(i),{name:{value:e,enumerable:!1,configurable:!0},attributes:{value:r||{},enumerable:!1,configurable:!0}});return o.push(e),r&&o.push(r),o},text:function(e,t){return Object.create(Object.prototype,{documentNode:{value:t||{},enumerable:!1,writable:!0},toString:{value:function(){return this.value},enumerable:!1},valueOf:{value:function(){return this.value},enumerable:!1},toJSON:{value:function(){return this.value},enumerable:!1},value:{value:e,enumerable:!1,writable:!0,configurable:!0}})}};e.exports=n}),t("observer",function(e){function n(e){return(p(e,"array")||p(e,"object"))&&"undefined"==typeof e._observers}function r(e){var t=[];return v(Object.getOwnPropertyNames(e),function(n){Object.getOwnPropertyDescriptor(e,n).configurable&&t.push(n)}),t}function i(e){return b({target:null,method:null,args:null,value:null,transformed:null},e)}function o(e){v(e,function(e){n(e)&&d.observe(e)})}function s(e){v(w,function(t){g(e,t,{value:function(){var e=i({target:this,method:t,args:Array.prototype.slice.call(arguments)});switch(t){case"push":case"unshift":this._recursive&&o(e.args);break;case"splice":e.args.length>2&&this._recursive&&o(e.args.slice(2));break;case"set":n(e.args[1])&&this._recursive&&d.observe(e.args[1])}if(this._transforms.dispatch(e),"set"===t){if("undefined"==typeof this[e.args[0]])throw new Error("failed to set value at "+e.args[0]+" index does not exist");this[e.args[0]]=e.args[1]}else e.value=Array.prototype[t].apply(this,e.args);this._observers.dispatch(e)}})})}function a(e,t,r,o){var s=i({target:r,method:o,args:Array.prototype.slice.call(arguments),value:t});n(s.value)&&r._recursive&&d.observe(s.value),r._transforms.dispatch(s),g(r,e,c(s.transformed||s.value,e,r)),r._observers.dispatch(s)}function u(e){y(e,{add:{value:function(e,t){if("undefined"!=typeof this[e])throw new Error("failed to add "+e+" already defined");a(e,t,this,"add")}},remove:{value:function(e){var t=i({target:this,method:"remove",args:Array.prototype.slice.call(arguments)});if("undefined"==typeof this[e])throw new Error("failed to remove "+e+" does not exist");t.value=this[e],this[e]._observers&&this[e]._observers.remove(),delete this[e],this._observers.dispatch(t)}}})}function c(e,t,n){return{get:function(){return e},set:function(){a(t,e,n,"set")},enumerable:!0,configurable:!0}}function l(e,t){return function(n){n.args[0]===e&&t.call(this,n)}}function d(e){this.bound=e,this.observed=null,this.signal=null}var f=t("./util"),h=t("./signals"),p=f.is,v=(f.bind,f.each),b=f.merge,m=f.extend,g=Object.defineProperty,y=Object.defineProperties,w=["push","unshift","splice","shift","pop","set"];d.prototype={observe:function(e){return this.observed=d.observe(e),this.signal=this.observed._observers.add(this.bound,this),this.observed},disconnect:function(){this.observed._observers.remove(this.signal)}},d.observable=function(e,t){if(!n(e))throw new Error("failed to make target observable not an array or object");return e._observers?e:(p(t,"boolean")&&(t={_recursive:{value:t,writable:!1,enumerable:!1}}),p(e,"array")||"undefined"!=typeof e.length?s(e):u(e),y(e,m({_transforms:{value:new h},_observers:{value:new h},_recursive:{value:!0,writable:!1},bind:{value:function(e,t){if(p(e,"function"))return void this._observers.add(e,this);var n,r=this;if(v(e.split("."),function(e,t,i,o){return t===i.length-1?(n=e,o):r[e]?void(r=r[e]):(r=null,o)}),null==r||"undefined"==typeof r._observers)throw new Error("failed to bind value, keypath does not exist or is not observable");r._observers.add(l(n,t),this)}}},t)),e)},d.observe=function(e,t){return v(r(e),function(t){n(e[t])&&d.observe(e[t]),("undefined"==typeof e.length||isNaN(t))&&g(e,t,c(e[t],t,e))}),d.observable(e),t&&e.bind(t),e},d.mutation=i,e.exports=d}),t("parser",function(e,n){function r(e){for(var t=0,n=p.length;n>t;t++)if(p[t]===e)return!0;return!1}function i(e){return d({type:null},e||{})}function o(e,t){if(e.hasChildNodes())for(var n=e.childNodes,r=0,i=n.length;i>r;r++)s(n[r],t)}function s(e,t){var n;if(-1===v.indexOf(e.nodeName.toLowerCase())){if(e instanceof DocumentFragment)return void o(e,t);if(3===e.nodeType)return t(i({type:"text",textNode:e,value:e.nodeValue}));n=i({documentElement:e,name:e.nodeName.toLowerCase()}),n.void=r(n.name),e.attributes.length&&(n.attributes={},f(e.attributes,function(e){n.attributes[e.name]=e.value})),n.type="start",n.void||t(n),o(e,t),n.attributes&&!n.void&&delete n.attributes,n.type="end",t(n)}}function a(e,t){var n,o=1;for((h(e[0],"array")||h(e[0],"object"))&&"undefined"!=typeof e[0].length?a(e[0],t):(n=i({documentElement:{},name:e[0]}),e.length>1&&"[object Object]"===e[1].toString()&&(o++,n.attributes=d(Object.create(null),e[1])),n.void=r(n.name),n.type="start",n.void||t(n));o<e.length;)h(e[o],"string")||e[o].value?t(i({type:"text",textNode:{},value:e.value||e[o]})):a(e[o],t),o++;"undefined"!=typeof n&&(n.attributes&&!n.void&&delete n.attributes,n.type="end",t(n))}function u(e){var t=i({documentElement:{}}),n=/(([\w\-]+([\s]|[\/>]))|([\w\-]+)=["']([^"']+)["'])/g,r=e.match(n);r.length>1&&(t.attributes={});for(var o=0,s=r.length;s>o;o++){var a=r[o].split("=");0===o?t.name=a[0].replace(/[\/>]/g,"").trim():a.length>1?t.attributes[a[0].trim()]=a[1].replace(/["'>]/g,"").trim():t.attributes[a[0].replace(/[>]/g,"").trim()]=null}return t}function c(e,t){var n,o,s;for(e=e.toString().replace(/\n/g,"").replace(/\r/g,"");e;){var a=e.indexOf("<");a>=0?(a>0&&t(i({type:"text",textNode:{},value:e.substring(0,a)})),e=e.substring(a),n=e.indexOf(">")+1,o=e.substring(0,n),s=u(o),s.void="/"===e[o.length-2]||r(s.name),"!"===o[1]?n=e.indexOf("-->")+1:"/"===o[1]||s.void?(s.type="end",t(s)):(s.type="start",t(s)),e=e.substring(n)):(t(i({type:"text",textNode:{},value:e})),e=null)}}var l=t("./util"),d=l.extend,f=l.each,h=l.is,p=["area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"],v=["script"];n.parseDOM=s,n.parseJSONML=a,n.parseHTML=c}),t("signals",function(e){function n(e,t,n){this.binding=e,this.context=t,this.priority="undefined"!=typeof n?n:0}function r(){this._signals=[]}var i=t("./util"),o=i.each;n.prototype={invoke:function(e){return this.binding?this.binding.apply(this.context,e):void 0}},r.prototype={dispatch:function(){var e=Array.prototype.slice.call(arguments);o(this._signals,function(t){return t.invoke(e)===!1?arguments[3]:void 0})},add:function(e,t,r){for(var i=new n(e,t,r),o=0;o<this._signals.length&&!(i.priority<=this._signals[o].priority);)o++;return this._signals.splice(o,0,i),i},remove:function(e){if(!e)return void(this._signals=[]);var t=this._signals.indexOf(e);return-1!==t&&this._signals.splice(t,1),t}},r.signal=n,e.exports=r}),t("util",function(e){var t="undefined"!=typeof process&&process.nextTick?process.nextTick:window.setTimeout,n="undefined"!=typeof window&&window.requestAnimationFrame?window.requestAnimationFrame:t,r={nextTick:function(e,n){return t(r.bind(e,n),1)},nextPaint:function(e,t){return n(r.bind(e,t),1)},each:function(e,t){var n,r=Object.create(null);if("undefined"!=typeof e.length){for(var i=0,o=e.length;o>i;i++)if(t.call(this,e[i],i,e,r)===r)return}else{n=Object.keys(e);for(var i=0,o=n.length;o>i;i++)if(t.call(this,e[n[i]],n[i],e,r)===r)return}},traverse:function(e,t){r.each.call(this,e,function(e){var n;return n=t.apply(this,Array.prototype.slice.call(arguments)),(r.is(e,"object")||r.is(e,"array"))&&r.traverse.call(this,e,t),n})},find:function(e,t){var n,i=r.noop;return i=r.is(t,"function")?function(){return t.apply(void 0,Array.prototype.slice.call(arguments))?(n=arguments[2],arguments[3]):void 0}:function(){each(t,function(){})},r.each(e,i),n},extend:function(e){for(var t=1,n=arguments.length;n>t;t++)arguments[t]&&r.each(arguments[t],function(t,n){e[n]=t});return e},merge:function(e){var t=Array.prototype.slice.call(arguments,1);return r.each(t,function(n,i){r.each(e,function(n,r){"undefined"!=typeof t[i][r]&&(e[r]=t[i][r])})}),e},inherit:function(e,t,n){return e.prototype&&t.prototype&&(e.prototype=Object.create(t.prototype,n),e.prototype.constructor=e),e},match:function(e,t){var n=!0;return r.each(t,function(t,r){e[r]!==t&&(n=!1)}),n},bind:function(e,t){var n=Array.prototype.slice.call(arguments,2);return function(){return e.apply(t,n.concat(Array.prototype.slice.call(arguments)))}},is:function(e,t){switch(t){case"empty":return 0==Object.keys(e).length}return Object.prototype.toString.call(e)==="[object "+r.capitalize(t)+"]"},accessors:function(e,t,n){return r.extend({get:function(){return e},set:function(n){var r=e;e=n,t&&t.call(this,n,r)}},n||Object.create(null))},capitalize:function(e){return e.replace(/[a-z]/,function(e){return e.toUpperCase()})},isEmpty:function(e){return 0==Object.keys(e).length},noop:function(){}};e.exports=r}),t("view",function(e){function n(){}function r(e){e.name||e.value||!e.length||l(e,n.parser.bind),u.observe(e)}function i(e){switch(this.active||(this.active=this),this.parent||(this.parent=this),e.type){case"text":this.active.push(s.text(e.value,e.textNode));break;case"start":this.parent=this.active,this.active=this.active[this.active.push(s.element(e.name,e.attributes,e.documentElement))-1];break;case"end":e.void?this.active.push(s.element(e.name,e.attributes,e.documentElement)):this.active=this.parent}}var o=t("./util"),s=t("./node"),a=t("./parser"),u=t("./observer"),c=(t("./batch"),o.traverse),r=o.bind,l=o.each,d=o.is;n.parser=a,n.parser.parse=function(e){var t,o=s.fragment(document.createDocumentFragment());return d(e,"string")?t="parseHTML":e.nodeName?(t="parseDOM",e=e.cloneNode()):t="parseJSONML",n.parser[t].call(void 0,e,r(i,o)),delete o.active,delete o.parent,o},n.prototype._compile=function(){c.call(this,this._node,function(e){console.log(e)})},n.prototype._parse=function(e){var t,n,r=new Parser,i="undefined"!=typeof e.nodeName;r.start.add(function(e){e=Node.element(e),d(e.documentNode,"empty")&&!i&&(e.documentNode=document.createElement(e.name),e.attributes&&l(e.attributes,function(t,n){e.documentNode.setAttribute(n,t)})),e.attributes._observers.add(function(e){"remove"==e.method?this.documentNode.removeAttribute(e.args[0]):this.documentNode.setAttribute(e.args[0],e.args[1])},e),this._node?(t.push(e),n=t,t=t[t.length-1]):t=this._node=e,i||t.documentNode.appendChild(e.documentNode)},this),r.content.add(function(e){e=Node.text(e),i||(e.textNode=document.createTextNode(e.nodeValue)),e._observers.add(function(e){console.log("here"),"remove"==e.method||(this.textNode.nodeValue=e.value)},e),t.push(e),i||t.documentNode.appendChild(e.textNode)}),r.end.add(function(e,r){r?(e=Node.element(e),d(e.documentNode,"empty")&&!i&&(e.documentNode=document.createElement(e.name),e.attributes&&l(e.attributes,function(t,n){e.documentNode.setAttribute(n,t)})),t.push(e),i||t.documentNode.appendChild(e.documentNode)):t=n}),r.done.add(function(){r.reset(),r=null}),r.parse(e)},n.prototype.json=function(){return this._node?JSON.stringify(this._node,function(e,t){return t.nodeValue?t.toString():t}):void 0},n.prototype.find=function(e,t){var n=this,r=[];return t=t||this._node,d(e,"object")&&l(t,function(t){var i=!0;t.attributes&&(l(e,function(e,n,r,o){return t.attributes[n]&&t.attributes[n]===e?void 0:(i=!1,o)}),i&&r.push(t),t.children.length&&(r=r.concat(n.find(e,t.children))))}),r},e.exports=n}),t("windsock",function(e){function n(e){this.options=e=e||Object.create(null),this._model=e.model||Object.create(null),this.bindings=[],e.view&&(this.view=new a(e.view)),e.bindings&&u.call(this,this.bindings,function(e){this.bindings.push(new s(e))})}{var r=t("./util"),i=(t("./signals"),t("./parser"),t("./observer")),o=t("./directive"),s=t("./binding"),a=t("./view"),u=(r.find,r.inherit,r.extend,r.each);r.is}n.prototype={init:function(){u.call(this,this.bindings,function(){var e=this.view.find(this.view),t=this.model;u.call(this,e,function(e){o.extend(function(){this.view=e,this.model=t})})})},_setModel:function(e){this._model=i.observe(e)}},Object.defineProperty(n.prototype,"model",{get:function(){return this._model},set:function(e){this._setModel(e)}}),n.observer=i,e.exports=n}),t("parse/html",function(e){function t(e){var t="";for(var n in e)t+=" "+n,e[n]&&(t+='="'+e[n]+'"');return t}e.exports={start:function(e){this.html.push("<"+e.name+t(e.attributes)+">")},content:function(e){this.html.push(e.value)},end:function(e,n){this.html.push(n?"<"+e.name+t(e.attributes)+"/>":"</"+e.name+">")}}}),window.Windsock=t("windsock")}();