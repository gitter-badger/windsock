!function(){"use strict";function e(e){return e.replace(/\//g,"")}function t(n,r){if(r)return void(t.module[e(n)]=r);var i=Object.create(null),o=i.exports=Object.create(null);if(n=n.replace(/[\/.]/g,""),!t.module[n])throw new Error("failed to resolve module path: "+n);return t.module[n].call(this,i,o),i.exports}t.module=Object.create(null),t("batch",function(e){function n(e){this._done(),this.callback=e}var r=t("./util").nextPaint;n.prototype={add:function(e){this.queue.push(e),this.requested||(this.id=r(this._run,this),this.requested=!0)},cancel:function(){"undefined"!=typeof window&&window.cancelAnimationFrame&&window.cancelAnimationFrame(this.id),this._done()},_run:function(){this.running=!0;for(var e=0;e<this.queue.length;e++)this.queue[e].call(this);this._done()},_done:function(){this.queue=[],this.requested=!1,this.running=!1,this.id=null,this.callback&&this.callback.call(this)}},e.exports=n}),t("binding",function(e){function n(e){this.options=e||{}}var r=t("./util"),i=t("./signals"),o=r.noop,a=r.merge,s=(r.extend,r.each),u=r.accessors,c=Object.defineProperty;n.prototype={},n.create=function(e){var t=Object.create(Object.prototype,{update:{value:new i,enumerable:!1,writable:!0}});return e=a({view:null,model:null,directive:o},e||Object.create(null)),s(e,function(e,n){c(t,n,u(e,function(e,n){t.update.dispatch(e,n)},{enumerable:!0}))}),t},e.exports=n}),t("directive",function(e){function n(){}var r=t("./util"),i=r.extend;n.extend=function(e){var t=e.prototype.constructor;return t.prototype=i(Object.create(n.prototype),e.prototype),t},n.prototype.init=function(e,t){this.view=e,this.model=t},n.prototype.update=function(){},n.prototype.bind=function(){this.model._observers.add(this.update,this)},n.prototype.destroy=function(){this.model._observers.remove()},e.exports=n}),t("node",function(e){var t=Object.defineProperties,n={fragment:function(e){return t([],{documentNode:{value:e||{},enumerable:!1,writable:!0}})},element:function(e,r,i){var o=t(n.fragment(i),{name:{value:e,enumerable:!1,configurable:!0},attributes:{value:r||{},enumerable:!1,configurable:!0}});return o.push(e),r&&o.push(r),o},text:function(e,t){return Object.create(Object.prototype,{documentNode:{value:t||{},enumerable:!1,writable:!0},toString:{value:function(){return this.value},enumerable:!1},valueOf:{value:function(){return this.value},enumerable:!1},toJSON:{value:function(){return this.value},enumerable:!1},value:{value:e,enumerable:!1,writable:!0,configurable:!0}})}};e.exports=n}),t("observer",function(e){function n(e){return(d(e,"array")||d(e,"object"))&&"undefined"==typeof e._observers}function r(e){var t=[];return f(Object.getOwnPropertyNames(e),function(n){Object.getOwnPropertyDescriptor(e,n).configurable&&t.push(n)}),t}function i(e,t){return function(n){n.args[0]===e&&t.call(this,n)}}function o(e){return h(Object.create(null,{target:{value:null,writable:!0,enumerable:!0},method:{value:null,writable:!0,enumerable:!0},value:{value:null,writable:!0,enumerable:!0},args:{value:null,writable:!0,enumerable:!0}}),e)}function a(e){return h({},e)}function s(e){return{get:function(){return e},set:function(t){var r,i=a({target:this,method:"set",value:t});n(t)&&this._recursive&&u.observe(i.value),this._transforms.dispatch(i),r=e,e=i.value,this._observers.dispatch(o({target:this,method:"set",value:r,transformed:i.value,args:Array.prototype.slice.call(arguments)}))},enumerable:!0,configurable:!0}}function u(e){this.bound=e,this.observed=null,this.signal=null}var c=t("./util"),l=t("./signals"),d=c.is,f=(c.bind,c.each),h=c.extend,p=Object.defineProperty,v=Object.defineProperties,b=["push","unshift","splice","shift","pop","set"];u.prototype={observe:function(e){return this.observed=u.observe(e),this.signal=this.observed._observers.add(this.bound,this),this.observed},disconnect:function(){this.observed._observers.remove(this.signal)}},u.observable=function(e,t){if(!n(e))throw new Error("failed to make target observable not an array or object");return e._observers?e:(d(t,"boolean")&&(t={_recursive:{value:t,writable:!1,enumerable:!1}}),d(e,"array")||"undefined"!=typeof e.length?f(b,function(t){p(e,t,{value:function(){var r,i=Array.prototype.slice.call(arguments),s=a({target:this,method:t,args:Array.prototype.slice.call(arguments)});switch(t){case"push":case"unshift":f(s.args,function(t,r){n(t)&&e._recursive&&(s.args[r]=u.observe(t))});break;case"splice":s.args.length>2&&f(s.args.slice(2),function(t,r){n(t)&&e._recursive&&(s.args[r+2]=u.observe(t))});break;case"set":n(s.args[1])&&e._recursive&&(s.args[1]=u.observe(s.args[1]))}if(this._transforms.dispatch(s),"set"===t){if("undefined"==typeof e[s.args[0]])throw new Error("failed to set value at "+s.args[0]+" index does not exist");e[s.args[0]]=r=s.args[1]}else r=Array.prototype[t].apply(e,s.args);e._observers.dispatch(o({target:e,method:t,value:r,transformed:s.value,args:i}))},enumerable:!1})}):v(e,{add:{value:function(t,r){var i=a({target:this,method:"add",value:r});if("undefined"!=typeof this[t])throw new Error("failed to add "+t+" already defined");n(r)&&this._recursive&&u.observe(i.value),this._transforms.dispatch(i),p(this,t,s(i.value,t,e)),this._observers.dispatch(o({target:this,method:"add",value:r,transformed:i.value,args:Array.prototype.slice.call(arguments)}))},enumerable:!1},remove:{value:function(t){var n;if("undefined"==typeof e[t])throw new Error("failed to remove "+t+" does not exist");n=e[t],e[t]._observers&&e[t]._observers.remove(),delete e[t],e._observers.dispatch(o({target:e,method:"remove",value:n,args:Array.prototype.slice.call(arguments)}))},enumerable:!1}}),v(e,h({_transforms:{value:new l,enumerable:!1},_observers:{value:new l,enumerable:!1},_recursive:{value:!0,writable:!1,enumerable:!1},bind:{value:function(e,t){if(d(e,"function"))return void this._observers.add(e,this);var n,r=this;if(f(e.split("."),function(e,t,i,o){return t===i.length-1?(n=e,o):r[e]?void(r=r[e]):(r=null,o)}),null==r||"undefined"==typeof r._observers)throw new Error("failed to bind value, keypath does not exist or is not observable");r._observers.add(i(n,t),this)},enumerable:!1}},t)),e)},u.observe=function(e,t){return f(r(e),function(t){n(e[t])&&u.observe(e[t]),("undefined"==typeof e.length||isNaN(t))&&p(e,t,s(e[t],t,e))}),u.observable(e),t&&e.bind(t),e},u.mutation=o,e.exports=u}),t("parser",function(e,n){function r(e){for(var t=0,n=p.length;n>t;t++)if(p[t]===e)return!0;return!1}function i(e){return d({type:null},e||{})}function o(e,t){if(e.hasChildNodes())for(var n=e.childNodes,r=0,i=n.length;i>r;r++)a(n[r],t)}function a(e,t){var n;if(-1===v.indexOf(e.nodeName.toLowerCase())){if(e instanceof DocumentFragment)return void o(e,t);if(3===e.nodeType)return t(i({type:"text",textNode:e,value:e.nodeValue}));n=i({documentElement:e,name:e.nodeName.toLowerCase()}),n.void=r(n.name),e.attributes.length&&(n.attributes={},f(e.attributes,function(e){n.attributes[e.name]=e.value})),n.type="start",n.void||t(n),o(e,t),n.attributes&&!n.void&&delete n.attributes,n.type="end",t(n)}}function s(e,t){var n,o=1;for((h(e[0],"array")||h(e[0],"object"))&&"undefined"!=typeof e[0].length?s(e[0],t):(n=i({documentElement:{},name:e[0]}),e.length>1&&"[object Object]"===e[1].toString()&&(o++,n.attributes=d(Object.create(null),e[1])),n.void=r(n.name),n.type="start",n.void||t(n));o<e.length;)h(e[o],"string")||e[o].value?t(i({type:"text",textNode:{},value:e.value||e[o]})):s(e[o],t),o++;"undefined"!=typeof n&&(n.attributes&&!n.void&&delete n.attributes,n.type="end",t(n))}function u(e){var t=i({documentElement:{}}),n=/(([\w\-]+([\s]|[\/>]))|([\w\-]+)=["']([^"']+)["'])/g,r=e.match(n);r.length>1&&(t.attributes={});for(var o=0,a=r.length;a>o;o++){var s=r[o].split("=");0===o?t.name=s[0].replace(/[\/>]/g,"").trim():s.length>1?t.attributes[s[0].trim()]=s[1].replace(/["'>]/g,"").trim():t.attributes[s[0].replace(/[>]/g,"").trim()]=null}return t}function c(e,t){var n,o,a;for(e=e.toString().replace(/\n/g,"").replace(/\r/g,"");e;){var s=e.indexOf("<");s>=0?(s>0&&t(i({type:"text",textNode:{},value:e.substring(0,s)})),e=e.substring(s),n=e.indexOf(">")+1,o=e.substring(0,n),a=u(o),a.void="/"===e[o.length-2]||r(a.name),"!"===o[1]?n=e.indexOf("-->")+1:"/"===o[1]||a.void?(a.type="end",t(a)):(a.type="start",t(a)),e=e.substring(n)):(t(i({type:"text",textNode:{},value:e})),e=null)}}var l=t("./util"),d=l.extend,f=l.each,h=l.is,p=["area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"],v=["script"];n.parseDOM=a,n.parseJSONML=s,n.parseHTML=c}),t("signals",function(e){function n(e,t,n){this.binding=e,this.context=t,this.priority="undefined"!=typeof n?n:0}function r(){this._signals=[]}var i=t("./util"),o=i.each;n.prototype={invoke:function(e){return this.binding?this.binding.apply(this.context,e):void 0}},r.prototype={dispatch:function(){var e=Array.prototype.slice.call(arguments);o(this._signals,function(t){return t.invoke(e)===!1?arguments[3]:void 0})},add:function(e,t,r){for(var i=new n(e,t,r),o=0;o<this._signals.length&&!(i.priority<=this._signals[o].priority);)o++;return this._signals.splice(o,0,i),i},remove:function(e){if(!e)return void(this._signals=[]);var t=this._signals.indexOf(e);return-1!==t&&this._signals.splice(t,1),t}},r.signal=n,e.exports=r}),t("util",function(e){var t="undefined"!=typeof process&&process.nextTick?process.nextTick:window.setTimeout,n="undefined"!=typeof window&&window.requestAnimationFrame?window.requestAnimationFrame:t,r={nextTick:function(e,n){return t(r.bind(e,n),1)},nextPaint:function(e,t){return n(r.bind(e,t),1)},each:function(e,t){var n,r=Object.create(null);if("undefined"!=typeof e.length){for(var i=0,o=e.length;o>i;i++)if(t.call(this,e[i],i,e,r)===r)return}else{n=Object.keys(e);for(var i=0,o=n.length;o>i;i++)if(t.call(this,e[n[i]],n[i],e,r)===r)return}},traverse:function(e,t){r.each.call(this,e,function(e){var n;return n=t.apply(this,Array.prototype.slice.call(arguments)),(r.is(e,"object")||r.is(e,"array"))&&r.traverse.call(this,e,t),n})},find:function(e,t){var n,i=r.noop;return i=r.is(t,"function")?function(){return t.apply(void 0,Array.prototype.slice.call(arguments))?(n=arguments[2],arguments[3]):void 0}:function(){each(t,function(){})},r.each(e,i),n},extend:function(e){for(var t=1,n=arguments.length;n>t;t++)arguments[t]&&r.each(arguments[t],function(t,n){e[n]=t});return e},merge:function(e){var t=Array.prototype.slice.call(arguments,1);return r.each(t,function(n,i){r.each(e,function(n,r){"undefined"!=typeof t[i][r]&&(e[r]=t[i][r])})}),e},inherit:function(e,t,n){return e.prototype&&t.prototype&&(e.prototype=Object.create(t.prototype,n),e.prototype.constructor=e),e},match:function(e,t){var n=!0;return r.each(t,function(t,r){e[r]!==t&&(n=!1)}),n},bind:function(e,t){var n=Array.prototype.slice.call(arguments,2);return function(){return e.apply(t,n.concat(Array.prototype.slice.call(arguments)))}},is:function(e,t){switch(t){case"empty":return 0==Object.keys(e).length}return Object.prototype.toString.call(e)==="[object "+r.capitalize(t)+"]"},accessors:function(e,t,n){return r.extend({get:function(){return e},set:function(n){var r=e;e=n,t&&t.call(this,n,r)}},n||Object.create(null))},capitalize:function(e){return e.replace(/[a-z]/,function(e){return e.toUpperCase()})},isEmpty:function(e){return 0==Object.keys(e).length},noop:function(){}};e.exports=r}),t("view",function(e){function n(){}function r(e){e.name||e.value||!e.length||l(e,n.parser.bind),u.observe(e)}function i(e){switch(this.active||(this.active=this),this.parent||(this.parent=this),e.type){case"text":this.active.push(a.text(e.value,e.textNode));break;case"start":this.parent=this.active,this.active=this.active[this.active.push(a.element(e.name,e.attributes,e.documentElement))-1];break;case"end":e.void?this.active.push(a.element(e.name,e.attributes,e.documentElement)):this.active=this.parent}}var o=t("./util"),a=t("./node"),s=t("./parser"),u=t("./observer"),c=(t("./batch"),o.traverse),r=o.bind,l=o.each,d=o.is;n.parser=s,n.parser.parse=function(e){var t,o=a.fragment(document.createDocumentFragment());return d(e,"string")?t="parseHTML":e.nodeName?(t="parseDOM",e=e.cloneNode()):t="parseJSONML",n.parser[t].call(void 0,e,r(i,o)),delete o.active,delete o.parent,o},n.prototype._compile=function(){c.call(this,this._node,function(e){console.log(e)})},n.prototype._parse=function(e){var t,n,r=new Parser,i="undefined"!=typeof e.nodeName;r.start.add(function(e){e=Node.element(e),d(e.documentNode,"empty")&&!i&&(e.documentNode=document.createElement(e.name),e.attributes&&l(e.attributes,function(t,n){e.documentNode.setAttribute(n,t)})),e.attributes._observers.add(function(e){"remove"==e.method?this.documentNode.removeAttribute(e.args[0]):this.documentNode.setAttribute(e.args[0],e.args[1])},e),this._node?(t.push(e),n=t,t=t[t.length-1]):t=this._node=e,i||t.documentNode.appendChild(e.documentNode)},this),r.content.add(function(e){e=Node.text(e),i||(e.textNode=document.createTextNode(e.nodeValue)),e._observers.add(function(e){console.log("here"),"remove"==e.method||(this.textNode.nodeValue=e.value)},e),t.push(e),i||t.documentNode.appendChild(e.textNode)}),r.end.add(function(e,r){r?(e=Node.element(e),d(e.documentNode,"empty")&&!i&&(e.documentNode=document.createElement(e.name),e.attributes&&l(e.attributes,function(t,n){e.documentNode.setAttribute(n,t)})),t.push(e),i||t.documentNode.appendChild(e.documentNode)):t=n}),r.done.add(function(){r.reset(),r=null}),r.parse(e)},n.prototype.json=function(){return this._node?JSON.stringify(this._node,function(e,t){return t.nodeValue?t.toString():t}):void 0},n.prototype.find=function(e,t){var n=this,r=[];return t=t||this._node,d(e,"object")&&l(t,function(t){var i=!0;t.attributes&&(l(e,function(e,n,r,o){return t.attributes[n]&&t.attributes[n]===e?void 0:(i=!1,o)}),i&&r.push(t),t.children.length&&(r=r.concat(n.find(e,t.children))))}),r},e.exports=n}),t("windsock",function(e){function n(e){this.options=e=e||Object.create(null),this._model=e.model||Object.create(null),this.bindings=[],e.view&&(this.view=new s(e.view)),e.bindings&&u.call(this,this.bindings,function(e){this.bindings.push(new a(e))})}{var r=t("./util"),i=(t("./signals"),t("./parser"),t("./observer")),o=t("./directive"),a=t("./binding"),s=t("./view"),u=(r.find,r.inherit,r.extend,r.each);r.is}n.prototype={init:function(){u.call(this,this.bindings,function(){var e=this.view.find(this.view),t=this.model;u.call(this,e,function(e){o.extend(function(){this.view=e,this.model=t})})})},_setModel:function(e){this._model=i.observe(e)}},Object.defineProperty(n.prototype,"model",{get:function(){return this._model},set:function(e){this._setModel(e)}}),n.observer=i,e.exports=n}),t("parse/html",function(e){function t(e){var t="";for(var n in e)t+=" "+n,e[n]&&(t+='="'+e[n]+'"');return t}e.exports={start:function(e){this.html.push("<"+e.name+t(e.attributes)+">")},content:function(e){this.html.push(e.value)},end:function(e,n){this.html.push(n?"<"+e.name+t(e.attributes)+"/>":"</"+e.name+">")}}}),window.Windsock=t("windsock")}();