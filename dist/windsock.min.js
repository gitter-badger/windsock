!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.windsock=t()}(this,function(){"use strict";function e(e){return e.charAt(0).toUpperCase()+e.slice(1)}function t(t,r){switch(r){case"empty":return 0===Object.keys(t).length;case"undefined":return"undefined"==typeof t;case"null":return null===t;default:return Object.prototype.toString.call(t)==="[object "+e(r)+"]"}}function r(e){for(var t=1,r=arguments.length;r>t;t++)for(var n in arguments[t])e[n]=arguments[t][n];return e}function n(e){for(var t=1,r=arguments.length;r>t;t++)for(var n in arguments[t])e[n]&&(e[n]=arguments[t][n]);return e}function i(e){var r={};return Object.keys(e).forEach(function(n){r[n]=t(e[n],"object")?r(e[n]):e[n]}),r}function o(e,t){for(var r in t)if(e[r]!==t[r])return!1;return!0}function s(){}function a(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return Object.defineProperty(t,"parent",{value:e,enumerable:!1,writable:!1,configurable:!1}),t}function u(e){var t=arguments.length<=1||void 0===arguments[1]?[]:arguments[1];return Object.defineProperty(t,"parent",{value:e,enumerable:!1,writable:!1,configurable:!1}),t}function c(e,t){return t instanceof Ve||t instanceof Ne?!1:t.name===e}function l(e,t){return t instanceof Ve||t instanceof Ne?!1:o(t.attributes,e)}function d(e){if(t(e,"function"))return e;if(t(e,"string"))return c.bind(null,e);if(t(e,"object"))return l.bind(null,e);throw new Error("specified query type not supported")}function h(e){return e instanceof Ve}function f(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return Object.defineProperty(t,"parent",{value:e,enumerable:!1,writable:!1,configurable:!1}),t}function v(e){var r=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],n={},i=r.decode||decodeURIComponent;if(!t(e,"string"))throw new Error("Parameter must be a string");return e=r.query?e.replace("?",""):e,e.split("&").forEach(function(e){e&&(e=e.split("="),n[i(e[0])]=1===e.length?null:i(e[1]))}),n}function p(e){var r=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],n=void 0,i=r.encode||encodeURIComponent;if(!t(e,"object"))throw new Error("Parameter must be an object");return n=Object.keys(e).map(function(t){var r=e[t]?"="+i(e[t]):"";return i(t)+r}).join("&"),n.length?r.query?"?"+n:n:null}function b(e){if(!De)return url.parse(e);if(!t(e,"string"))throw new Error("Parameter must be a string");return De.href=e,{protocol:De.protocol||null,host:De.host||null,port:De.port||null,hostname:De.hostname||null,hash:De.hash||null,search:De.search||null,query:v(De.search,{query:!0}),pathname:De.pathname||null,href:De.href}}function g(e){var r=void 0,n=void 0,i=void 0,o=void 0,s=void 0,a=void 0;if(!De)return url.format(e);if(!t(e,"object"))throw new Error("Parameter must be an object");return r=e.protocol||"",n=e.host||"",i=e.pathname||"",o=e.search||"",s=p(e.query,{query:!0}),a=e.hash||"",r+"//"+n+i+(s||o)+a}function m(e){var t=b(e);return t.template={},t.pathname.replace("/","").split("/").forEach(function(e){0===e.indexOf(":")&&e.length>1&&(t.template[e.replace(":","")]="")}),t}function y(e){var r=void 0,n=void 0;if(!t(e.template,"object"))throw new Error("property must be an object");r=e.pathname;for(var i in e.template){var o=e.template[i];o=o.toString?o.toString():"",e.pathname=e.pathname.replace((o.length?":":"/:")+i,o)}return n=g(e),e.pathname=r,n}function w(e,r){var n,i=Fe.recursive(r),o=_(e);if(e._observers?r.observers.forEach(function(t){e._observers.exists(t)||e._observers.add(t)}):(n={_observers:{value:r,configurable:!1}},o.forEach(function(t){C(t,e[t],n)}),t(e,"array")?O(e,n):k(e,n),Object.defineProperties(e,n)),i.observers.length)for(var s=0,a=o.length;a>s;s++)E(e[o[s]])&&w(e[o[s]],i)}function k(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];t.add={value:function(e,t){j(this,e,t)}},t["delete"]={value:function(e){x(this,e)}}}function O(e){for(var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],r=function(e,r){t[Ae[e]]={value:function(){V({args:Array.prototype.slice.call(arguments),method:Ae[e],target:this})}}},n=0,i=Ae.length;i>n;n++)r(n,i)}function E(e){return t(e,"array")||t(e,"object")}function _(e){return Object.getOwnPropertyNames(e).filter(function(t){return Object.getOwnPropertyDescriptor(e,t).configurable})}function C(e,t){var r=arguments.length<=2||void 0===arguments[2]?{}:arguments[2];return r[e]={get:function(){return t},set:function(r){var n=new Se({type:e,target:this,method:"set",oldValue:t,newValue:r,args:[]});this._observers.recursiveExists()&&E(r)&&w(r,Fe.recursive(this._observers)),t&&t._observers&&P(this,t._observers),t=r,this._observers.dispatch(n)},enumerable:!0,configurable:!0},r}function j(e,r,n){if(!t(e[r],"undefined"))throw new Error("Failed to add "+r+" already defined");var i=new Se({type:r,target:e,method:"add",oldValue:e[r],newValue:n,args:Array.prototype.slice.call(arguments,1)});e._observers.recursiveExists()&&E(n)&&w(n,Fe.recursive(e._observers)),Object.defineProperties(e,C(r,n)),e._observers.dispatch(i)}function x(e,r){if(t(e[r],"undefined"))throw new Error("Failed to delete "+r+" does not exist");var n=new Se({type:r,target:e,method:"delete",oldValue:e[r],newValue:void 0,args:Array.prototype.slice.call(arguments,1)});e[r]&&e[r]._observers&&P(e,e[r]._observers),delete e[r],e._observers.dispatch(n)}function V(e){var t=e.target,r=e.args,n=e.method,i=new Se({type:void 0,target:t,method:n,oldValue:void 0,newValue:void 0,args:r});switch(n){case"fill":i.type=r.splice(1),i.oldValue=t.slice(r[1],r[2]);break;case"pop":i.type=t.length-1,i.oldValue=t.slice(t.length-1);break;case"push":i.type=t.length,i.newValue=r;break;case"shift":i.type=0,i.oldValue=t.slice(0,1);break;case"unshift":i.type=0,i.newValue=r;break;case"splice":i.type=r[0],r[1]&&(i.oldValue=t.slice(r[0],r[0]+r[1])),i.newValue=r.slice(2)}t._observers.recursiveExists()&&i.newValue.forEach(function(e){E(e)&&w(e,Fe.recursive(t._observers))}),i.oldValue&&i.oldValue.forEach(function(e){e&&e._observers&&P(t,e._observers)}),Array.prototype[n].apply(t,e.args),t._observers.dispatch(i)}function N(e,t){_(e).forEach(function(r){N(e[r],t),e[r]._observers&&e[r]._observers.remove(t)})}function P(e,t){e._observers.recursive().forEach(function(e){t.remove(e)})}function T(e,r){var n,i=Ue.recursive(r),o=M(e);if(e._observers?r.observers.forEach(function(t){e._observers.exists(t)||e._observers.add(t)}):(n={_observers:{value:r,configurable:!1}},o.forEach(function(t){S(t,e[t],n)}),t(e,"array")?q(e,n):D(e,n),Object.defineProperties(e,n)),i.observers.length)for(var s=0,a=o.length;a>s;s++)A(e[o[s]])&&T(e[o[s]],i)}function D(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];t.add={value:function(e,t){F(this,e,t)}},t["delete"]={value:function(e){I(this,e)}}}function q(e){for(var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],r=function(e,r){t[Ie[e]]={value:function(){R({args:Array.prototype.slice.call(arguments),method:Ie[e],target:this})}}},n=0,i=Ie.length;i>n;n++)r(n,i)}function A(e){return t(e,"array")||t(e,"object")}function M(e){return Object.getOwnPropertyNames(e).filter(function(t){return Object.getOwnPropertyDescriptor(e,t).configurable})}function S(e,t){var r=arguments.length<=2||void 0===arguments[2]?{}:arguments[2];return r[e]={get:function(){return t},set:function(r){var n=new He({type:e,target:this,method:"set",oldValue:t,newValue:r,args:[]});this._observers.recursiveExists()&&A(r)&&T(r,Ue.recursive(this._observers)),t&&t._observers&&U(this,t._observers),t=r,this._observers.dispatch(n)},enumerable:!0,configurable:!0},r}function F(e,r,n){if(!t(e[r],"undefined"))throw new Error("Failed to add "+r+" already defined");var i=new He({type:r,target:e,method:"add",oldValue:e[r],newValue:n,args:Array.prototype.slice.call(arguments,1)});e._observers.recursiveExists()&&A(n)&&T(n,Ue.recursive(e._observers)),Object.defineProperties(e,S(r,n)),e._observers.dispatch(i)}function I(e,r){if(t(e[r],"undefined"))throw new Error("Failed to delete "+r+" does not exist");var n=new He({type:r,target:e,method:"delete",oldValue:e[r],newValue:void 0,args:Array.prototype.slice.call(arguments,1)});e[r]&&e[r]._observers&&U(e,e[r]._observers),delete e[r],e._observers.dispatch(n)}function R(e){var t=e.target,r=e.args,n=e.method,i=new He({type:void 0,target:t,method:n,oldValue:void 0,newValue:void 0,args:r});switch(n){case"fill":i.type=r.splice(1),i.oldValue=t.slice(r[1],r[2]);break;case"pop":i.type=t.length-1,i.oldValue=t.slice(t.length-1);break;case"push":i.type=t.length,i.newValue=r;break;case"shift":i.type=0,i.oldValue=t.slice(0,1);break;case"unshift":i.type=0,i.newValue=r;break;case"splice":i.type=r[0],r[1]&&(i.oldValue=t.slice(r[0],r[0]+r[1])),i.newValue=r.slice(2)}t._observers.recursiveExists()&&i.newValue.forEach(function(e){A(e)&&T(e,Ue.recursive(t._observers))}),i.oldValue&&i.oldValue.forEach(function(e){e&&e._observers&&U(t,e._observers)}),Array.prototype[n].apply(t,e.args),t._observers.dispatch(i)}function H(e,t){M(e).forEach(function(r){H(e[r],t),e[r]._observers&&e[r]._observers.remove(t)})}function U(e,t){e._observers.recursive().forEach(function(e){t.remove(e)})}function L(e,t,r){var n=void 0,i=void 0;n=t.transform.bind?t.transform.bind(e,r):{node:e,prop:"node"},i=n.node.bindings[n.prop],i&&(i.instance.transform.unbind&&i.instance.transform.unbind(n.node,i),i.observer.disconnect()),n.node.bindings[n.prop]={template:e,target:r,instance:t,observer:void 0},Le.observer(n.node,n.node.bindings[n.prop])}function z(e,t){var r=t.toString().split("."),n=r.slice(-1)[0],i=e,o=e;if(""!==t)for(;r.length;)i=o,o=B(o,r);return{key:n,parent:i,value:o}}function B(e,t){var r=t.shift();if("undefined"==typeof e[r])throw new Error("Failed to resolve '"+r+"' on target");return e[r]}function J(e){var t=b(e.url);return e.crossOrigin=Je.protocol!==t.protocol||Je.host!==t.host,e}function G(e){return t(e.data,"object")&&e.urlencode&&(e.headers["Content-Type"]="application/x-www-form-urlencoded",e.data=p(e.data)),t(e.data,"formData")&&delete e.headers["Content-Type"],t(e.data,"object")&&(e.data=JSON.stringify(e.data)),e}function X(e){try{e.data=JSON.parse(e.data)}catch(t){}return e}function $(e){return e.timeout&&(Ge=setTimeout(function(){e.abort()},e.timeout)),e}function K(e){return clearTimeout(Ge),e}function Q(e){e.override&&/^(PUT|PATCH|DELETE)$/i.test(e.method)&&(e.headers["X-HTTP-Method-Override"]=e.method,e.method="POST")}function W(e){return new Promise(function(t){var r=new XMLHttpRequest,n={request:e},i=function(){n.data=r.responseText,n.status=r.status,n.statusText=r.statusText,n.headers=r.getAllResponseHeaders(),t(n)};e.abort=r.abort,r.timeout=0,r.onload=i,r.onabort=i,r.onerror=i,r.ontimeout=s,r.onprogress=s,r.open(e.method,e.url,!0);for(var o in e.headers)r.setRequestHeader(o,e.headers[o]);r.send(e.data)})}function Y(e){var t=e.client||W;return Promise.resolve(t(e)).then(function(e){return e.ok=e.status>=200&&e.status<300,e})}function Z(e){for(var t=0,r=$e.length;r>t;t++)if($e[t]===e)return!0;return!1}function ee(e){return!/[^\t\n\r ]/.test(e)}function te(e){return e.toString().replace(/[\t\n\r]|\s{2,}/g,"")}function re(e,t){if(e.hasChildNodes())for(var r=e.childNodes,n=0,i=r.length;i>n;n++)ie(r[n],t)}function ne(e){var t={},r=/(([\w\-]+([\s]|[\/>]))|([\w\-]+)=["']([^"']+)["'])/g,n=e.match(r);n.length>1&&(t.attributes={});for(var i=0,o=n.length;o>i;i++){var s=n[i].split("=");0===i?t.name=s[0].replace(/[\/>]/g,"").trim():s.length>1?t.attributes[s[0].trim()]=s[1].replace(/["'>]/g,"").trim():t.attributes[s[0].replace(/[>]/g,"").trim()]=null}return t}function ie(e,t){var r;if(-1===Ke.indexOf(e.nodeName.toLowerCase())){if(e instanceof DocumentFragment)return void re(e,t);if(3===e.nodeType){if(ee(e.nodeValue)||!te(e.nodeValue).length)return;return t({type:"text",textNode:e,value:te(e.nodeValue)})}r={documentElement:e,name:e.nodeName.toLowerCase(),"void":Z(e.nodeName.toLowerCase())},e.attributes.length&&(r.attributes={},e.attributes.forEach(function(e){r.attributes[e.name]=e.value})),r.type="start",r["void"]||t(r),re(e,t),r.attributes&&!r["void"]&&delete r.attributes,r.type="end",t(r)}}function oe(e,t){var r,n,i;for(e=te(e);e;){var o=e.indexOf("<");o>=0?(o>0&&t({type:"text",value:e.substring(0,o)}),e=e.substring(o),r=e.indexOf(">")+1,n=e.substring(0,r),i=ne(n),i["void"]="/"===e[n.length-2]||Z(i.name),"!"===n[1]?r=e.indexOf("-->")+1:"/"===n[1]||i["void"]?(i.type="end",t(i)):(i.type="start",t(i)),e=e.substring(r)):(t({type:"text",value:e}),e=null)}}function se(e,n){var i,o=1;for((t(e[0],"array")||t(e[0],"object"))&&"undefined"!=typeof e[0].length?se(e[0],n):(i={name:e[0],"void":Z(e[0]),type:"start"},e.length>1&&"[object Object]"===e[1].toString()&&(o++,i.attributes=r({},e[1])),i["void"]||n(i));o<e.length;)t(e[o],"string")||e[o].value?n({type:"text",value:e.value||e[o]}):se(e[o],n),o++;"undefined"!=typeof i&&(i.attributes&&!i["void"]&&delete i.attributes,i.type="end",n(i))}function ae(e){function r(e){var t;switch(e.type){case"text":i.append(new Ve(e.value));break;case"start":t=new Pe(e.name,e.attributes),i.append(t),i=t;break;case"end":e["void"]?(t=new Pe(e.name,e.attributes,e["void"]),i.append(t)):i.parent&&(i=i.parent)}}var n,i=new Ne;return t(e,"string")?oe(e,r):e.nodeName?document.contains(e)?(n=e,ie(e.cloneNode(!0),r)):ie(e,r):se(e,r),i=1===i.children.length?i.children[0]:i,i.transclude=n,i}function ue(){Qe=null,We=!1,Ye=!1,Ze=[]}function ce(){Ye=!0;for(var e=0;e<Ze.length;e++)Ze[e].call();ue()}function le(e){return Ze.push(e),We||(Qe=Ee(ce),We=!0),Qe}function de(e){for(;e;){if(e.DOMNode)return e.DOMNode.namespaceURI;if("svg"===e.name)return et.svg;e=e.parent instanceof Pe?e.parent:!1}return et.html}function he(e){var t=e.indexOf(":"),r=null;return t>=0&&(r=et[e.substring(0,t)]||null),r}function fe(e){"textContent"===e.type&&e.oldValue!==e.newValue&&le(function(){e.target.parent.DOMNode.textContent=e.newValue})}function ve(e){var t=void 0;if(e.oldValue!==e.newValue)switch(t=e.target.parent,e.method){case"delete":le(function(){t.DOMNode.removeAttributeNS(he(e.type),e.type)});break;case"add":case"set":le(function(){t.DOMNode.setAttributeNS(he(e.type),e.type,e.newValue)})}}function pe(e){var t=e.target.parent.DOMNode;switch(e.method){case"push":e.newValue.forEach(function(e){le(function(){t.appendChild(e.DOMNode)})});break;case"unshift":e.newValue.forEach(function(e){le(function(){t.insertBefore(e.DOMNode,t.firstChild)})});break;case"splice":e.oldValue&&e.oldValue.length&&le(function(){t.removeChild(e.oldValue[0].DOMNode)}),3===e.args.length&&le(function(){t.insertBefore(e.newValue[0].DOMNode,t.childNodes[e.type])})}}function be(e){var t=void 0,r=void 0,n=void 0;if(e instanceof Ve)e.DOMNode=document.createTextNode(e.value.textContent),t=new Me(fe),t.observe(e.value),e.observers.push(t);else if(e instanceof Pe)e.DOMNode=document.createElementNS(de(e),e.name),Object.keys(e.attributes).forEach(function(t){e.DOMNode.setAttributeNS(he(t),t,e.attributes[t])}),r=new Me(ve),n=new Me(pe),r.observe(e.attributes),n.observe(e.children),e.observers.push(r),e.observers.push(n);else{if(!(e instanceof Ne))throw new Error("Unspecified node instance");e.DOMNode=document.createDocumentFragment(),n=new Me(pe),n.observe(e.children),e.observers.push(n)}e.parent&&e.parent.DOMNode.appendChild(e.DOMNode)}function ge(e){Object.keys(e.bindings).forEach(function(t){var r=e.bindings[t];r.instance.transform.compile&&r.instance.transform.compile(e,r),e.bindings[t]={template:r.template,target:r.target,instance:r.instance,observer:void 0},Le.observer(e,e.bindings[t])})}function me(e){if(!e instanceof xe)throw new Error("Template param must be of type Node");if(e.compiled===!0)throw new Error("Specified template is already compiled");var t=e.clone(!0);return ye(t),t}function ye(e){"undefined"!=typeof document&&be(e),ge(e),e.compiled=!0,e.children&&e.children.forEach(ye)}function we(e){var t=arguments.length<=1||void 0===arguments[1]?!1:arguments[1],r=void 0;if(!e instanceof xe)throw new Error("Node param must be of type Node");return r=e.clone(t),e.compiled===!0&&(r=me(r)),r}function ke(e,t){if("undefined"==typeof document)throw new Error("transclude requires a document");if(!e.transclude&&!t)throw new Error("unspecified transclusion target");t=e.transclude||t,t.parentNode.insertBefore(e.DOMNode,t),t.parentNode.removeChild(t),e.transclude=void 0}var Oe={};Oe.classCallCheck=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},Oe.createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),Oe.get=function rt(e,t,r){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,t);if(void 0===n){var i=Object.getPrototypeOf(e);return null===i?void 0:rt(i,t,r)}if("value"in n)return n.value;var o=n.get;if(void 0!==o)return o.call(r)},Oe.inherits=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},Oe.possibleConstructorReturn=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t};var Ee,_e,Ce="undefined"!=typeof process&&process.nextTick?process.nextTick:setTimeout;"undefined"!=typeof window&&window.requestAnimationFrame?(Ee=window.requestAnimationFrame,_e=window.cancelAnimationFrame):(Ee=setTimeout,_e=clearTimeout);var je=Object.freeze({get paint(){return Ee},get cancelPaint(){return _e},tick:Ce,capitalize:e,is:t,extend:r,merge:n,clone:i,match:o,noop:s}),xe=function(){function e(){Oe.classCallCheck(this,e),this.compiled=!1,this.transclude=void 0,this.DOMNode=void 0,this.observers=[],this.bindings={}}return Oe.createClass(e,[{key:"destroy",value:function(){var e=this;for(this.compiled=!1,this.transclude=void 0,Ee(function(){e.DOMNode=void 0});this.observers.length;)this.observers.pop().disconnect();for(var t in this.bindings)this.bindings[t].observer.disconnect()}},{key:"clone",value:function(){var t=new e;t.transclude=this.transclude;for(var r in this.bindings)t.bindings[r]=this.bindings[r];return t}},{key:"toJSON",value:function(){return this.jsonml}},{key:"valueOf",value:function(){return JSON.stringify(this)}},{key:"toString",value:function(){return this.html}},{key:"jsonml",get:function(){return""}},{key:"html",get:function(){return""}}]),e}(),Ve=function(e){function r(e){Oe.classCallCheck(this,r);var t=Oe.possibleConstructorReturn(this,Object.getPrototypeOf(r).call(this));return t.value={textContent:e},a(t,t.value),t.parent=void 0,t}return Oe.inherits(r,e),Oe.createClass(r,[{key:"destroy",value:function(){Oe.get(Object.getPrototypeOf(r.prototype),"destroy",this).call(this),t(this.parent,"undefined")||this.remove()}},{key:"clone",value:function(){var e=new r(this.value.textContent);e.transclude=this.transclude;for(var t in this.bindings)e.bindings[t]=this.bindings[t];return e}},{key:"remove",value:function(){if(t(this.parent,"undefined"))throw new Error("Failed to remove node");this.parent.children.splice(this.parent.children.indexOf(this),1),this.parent=void 0}},{key:"jsonml",get:function(){return this.value.textContent}},{key:"html",get:function(){return this.value.textContent}},{key:"text",get:function(){return this.value.textContent},set:function(e){this.value.textContent=e}}]),r}(xe),Ne=function(e){function r(){Oe.classCallCheck(this,r);var e=Oe.possibleConstructorReturn(this,Object.getPrototypeOf(r).call(this));return e.children=u(e),e}return Oe.inherits(r,e),Oe.createClass(r,[{key:"destroy",value:function(){Oe.get(Object.getPrototypeOf(r.prototype),"destroy",this).call(this);for(var e=this.children.length;e;)e--,this.children[e].destroy()}},{key:"clone",value:function(){var e=arguments.length<=0||void 0===arguments[0]?!1:arguments[0],t=new r;e&&this.children.length&&this.children.forEach(function(e){t.append(e.clone(!0))}),t.transclude=this.transclude;for(var n in this.bindings)t.bindings[n]=this.bindings[n];return t}},{key:"append",value:function(e){if(this.compiled!==e.compiled)throw new Error("Node compiled value does not match");t(e.parent,"undefined")||e.remove(),e.parent=this,this.children.push(e)}},{key:"prepend",value:function(e){if(this.compiled!==e.compiled)throw new Error("Node compiled value does not match");t(e.parent,"undefined")||e.remove(),e.parent=this,this.children.unshift(e)}},{key:"insert",value:function(e,r){if(this.compiled!==e.compiled)throw new Error("Node compiled value does not match");t(e.parent,"undefined")||e.remove(),e.parent=this,this.children.splice(r,0,e)}},{key:"find",value:function(e){for(var r=d(e),n=void 0,i=0,o=this.children.length;o>i;i++){if(r(this.children[i]))return this.children[i];if(!t(this.children[i].find,"undefined")&&(n=this.children[i].find(r),!t(n,"undefined")))return n}}},{key:"filter",value:function(e){for(var r=d(e),n=[],i=0,o=this.children.length;o>i;i++)r(this.children[i])&&n.push(this.children[i]),t(this.children[i].find,"undefined")||(n=n.concat(this.children[i].find(r)));return n}},{key:"text",value:function(){return this.filter(h).join("")}},{key:"jsonml",get:function(){throw new Error("Cannot convert to jsonml")}},{key:"html",get:function(){return this.children.map(function(e){return e.html}).join("")}}]),r}(xe),Pe=function(e){function r(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],n=arguments.length<=2||void 0===arguments[2]?!1:arguments[2];if(Oe.classCallCheck(this,r),!e)throw new Error("Failed to instantiate Element invalid name specified");var i=Oe.possibleConstructorReturn(this,Object.getPrototypeOf(r).call(this));return i.name=e,i.attributes=f(i,t),i.empty=n,i}return Oe.inherits(r,e),Oe.createClass(r,[{key:"destroy",value:function(){Oe.get(Object.getPrototypeOf(r.prototype),"destroy",this).call(this),t(this.parent,"undefined")||this.remove(),this.attributes=f(this),this.empty=!1}},{key:"clone",value:function(){var e=arguments.length<=0||void 0===arguments[0]?!1:arguments[0],t=new r(this.name,i(this.attributes));e&&this.children.length&&this.children.forEach(function(e){t.append(e.clone(!0))}),t.transclude=this.transclude;for(var n in this.bindings)t.bindings[n]=this.bindings[n];return t}},{key:"remove",value:function(){if(t(this.parent,"undefined"))throw new Error("Failed to remove node");this.parent.children.splice(this.parent.children.indexOf(this),1),this.parent=void 0}},{key:"jsonml",get:function(){var e=[];e.push(this.name),t(this.attributes,"empty")===!1&&e.push(i(this.attributes));for(var r=0,n=this.children.length;n>r;r++)e.push(this.children[r].jsonml);return e}},{key:"html",get:function(){var e=this,t=[],r=Object.keys(this.attributes);if(t.push("<"+this.name),r.length&&(t.push(" "),t=t.concat(r.map(function(t){return e.attributes[t]&&(t+='="'+e.attributes[t]+'"'),t}))),this.empty)t.push("/>");else{t.push(">");for(var n=0,i=this.children.length;i>n;n++)t.push(this.children[n].html);t.push("</"+this.name+">")}return t.join("")}}]),r}(Ne),Te=Object.freeze({Node:xe,Text:Ve,Fragment:Ne,Element:Pe}),De=void 0;"undefined"!=typeof document&&(De=document.createElement("a"));var qe=Object.freeze({parse:m,format:y}),Ae=["fill","pop","push","shift","splice","unshift"],Me=function(){function e(r){if(Oe.classCallCheck(this,e),t(r,"undefined"))throw new Error("Failed to instantiate missing callback");if(!t(r,"function"))throw new Error("Invalid callback specified");this.callback=r,this._target=void 0,this._config=void 0}return Oe.createClass(e,[{key:"observe",value:function(e){var r,n=arguments.length<=1||void 0===arguments[1]?{recursive:!1}:arguments[1];if(!E(e))throw new Error("Failed to observe not a valid target");if(t(n.recursive,"undefined"))throw new Error("Invalid config specified");r=new Fe,r.add(this),this._target=e,this._config=n,w(e,r)}},{key:"disconnect",value:function(){this._target&&(this._config.recursive&&N(this._target,this),this._target._observers.remove(this)),this._target=void 0,this._config=void 0}}]),e}(),Se=function nt(e){Oe.classCallCheck(this,nt),this.type=e.type,this.target=e.target,this.method=e.method,this.args=e.args,this.newValue=e.newValue,this.oldValue=e.oldValue},Fe=function(){function e(){var t=arguments.length<=0||void 0===arguments[0]?[]:arguments[0];Oe.classCallCheck(this,e),this.observers=t}return Oe.createClass(e,[{key:"dispatch",value:function(e){if(!e instanceof Se)throw new Error("Invalid record specified");this.observers.forEach(function(t){t.callback(e)})}},{key:"exists",value:function(e){return-1!==this.observers.indexOf(e)}},{key:"add",value:function(e){return this.observers.push(e)}},{key:"remove",value:function(e){var t=this.observers.indexOf(e);return-1!==t&&this.observers.splice(t,1),t}},{key:"recursive",value:function(){return this.observers.filter(function(e){return e._config.recursive})}},{key:"recursiveExists",value:function(){for(var e=0,t=this.observers.length;t>e;e++)if(this.observers[e]._config.recursive)return!0;return!1}}],[{key:"recursive",value:function(t){if(!t instanceof e)throw new Error("Invalid list specified");return new e(t.recursive())}}]),e}(),Ie=["fill","pop","push","shift","splice","unshift"],Re=function(){function e(r){if(Oe.classCallCheck(this,e),t(r,"undefined"))throw new Error("Failed to instantiate missing callback");if(!t(r,"function"))throw new Error("Invalid callback specified");this.callback=r,this._target=void 0,this._config=void 0}return Oe.createClass(e,[{key:"observe",value:function(e){var r,n=arguments.length<=1||void 0===arguments[1]?{recursive:!1}:arguments[1];if(!A(e))throw new Error("Failed to observe not a valid target");if(t(n.recursive,"undefined"))throw new Error("Invalid config specified");r=new Ue,r.add(this),this._target=e,this._config=n,T(e,r)}},{key:"disconnect",value:function(){this._target&&(this._config.recursive&&H(this._target,this),this._target._observers.remove(this)),this._target=void 0,this._config=void 0}}]),e}(),He=function it(e){Oe.classCallCheck(this,it),this.type=e.type,this.target=e.target,this.method=e.method,this.args=e.args,this.newValue=e.newValue,this.oldValue=e.oldValue},Ue=function(){function e(){var t=arguments.length<=0||void 0===arguments[0]?[]:arguments[0];Oe.classCallCheck(this,e),this.observers=t}return Oe.createClass(e,[{key:"dispatch",value:function(e){if(!e instanceof He)throw new Error("Invalid record specified");this.observers.forEach(function(t){t.callback(e)})}},{key:"exists",value:function(e){return-1!==this.observers.indexOf(e)}},{key:"add",value:function(e){return this.observers.push(e)}},{key:"remove",value:function(e){var t=this.observers.indexOf(e);return-1!==t&&this.observers.splice(t,1),t}},{key:"recursive",value:function(){return this.observers.filter(function(e){return e._config.recursive})}},{key:"recursiveExists",value:function(){for(var e=0,t=this.observers.length;t>e;e++)if(this.observers[e]._config.recursive)return!0;return!1}}],[{key:"recursive",value:function(t){if(!t instanceof e)throw new Error("Invalid list specified");return new e(t.recursive())}}]),e}(),Le=function(){function e(){var r=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];Oe.classCallCheck(this,e),t(r,"function")?this.transform={update:r}:this.transform=r}return Oe.createClass(e,[{key:"render",value:function(e,r){var n=arguments.length<=2||void 0===arguments[2]?"":arguments[2],i=z(r,n);if(t(e,"array"))for(var o=0,s=e.length;s>o;o++)L(e[o],this,i);else L(e,this,i)}}],[{key:"observer",value:function r(e,n){var i=n.target,o=n.instance,r=void 0;t(i.value,"object")||t(i.value,"array")?(r=new Re(function(t){o.transform.update&&o.transform.update(e,t,n)}),r.observe(i.value)):(r=new Re(function(t){t.type===i.key&&o.transform.update&&o.transform.update(e,t,n)}),r.observe(i.parent)),n.observer=r}}]),e}(),ze=function(){function e(){Oe.classCallCheck(this,e),this.listeners=[]}return Oe.createClass(e,[{key:"add",value:function(e){this.listeners.push(e)}},{key:"remove",value:function(e){return e?this.listeners.splice(this.listeners.indexOf(e),1):void(this.listeners=[])}},{key:"dispatch",value:function(){for(var e=this,t=arguments.length,r=Array(t),n=0;t>n;n++)r[n]=arguments[n];return this.listeners.map(function(t){return t.apply(e,r)})}}]),e}(),Be=function(){function e(){var t=this,r=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];Oe.classCallCheck(this,e),this._state=r,this._mutations={},Object.keys(n).forEach(function(e){t._mutations[e]=new ze,t._mutations[e].add(n[e])})}return Oe.createClass(e,[{key:"dispatch",value:function(e){var t=this._mutations[e];if(!t)throw new Error(e+" mutation does not exist");for(var r=arguments.length,n=Array(r>1?r-1:0),i=1;r>i;i++)n[i-1]=arguments[i];t.dispatch(this.state,n)}}]),e}(),Je=b(location.href),Ge=void 0,Xe=function(){function e(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];Oe.classCallCheck(this,e),this.urlencode=!!t.urlencode,this.override=!!t.override,this.timeout=t.timeout||0,this.headers=t.headers||{},this._url=m(t.url||"")}return Oe.createClass(e,[{key:"GET",value:function(t){return e.method(this,"GET",t)}},{key:"POST",value:function(t){return e.method(this,"POST",t)}},{key:"PUT",value:function(t){return e.method(this,"PUT",t)}},{key:"PATCH",value:function(t){return e.method(this,"PATCH",t)}},{key:"DELETE",value:function(t){return e.method(this,"DELETE",t)}},{key:"url",get:function(){return y(this._url)}},{key:"params",get:function(){return this._url.query},set:function(e){this._url.query=e}},{key:"path",get:function(){return this._url.template},set:function(e){this._url.template=e}}],[{key:"method",value:function(t,r){var n=arguments.length<=2||void 0===arguments[2]?{}:arguments[2];return e.request({urlencode:t.urlencode,override:t.override,timeout:t.timeout,headers:i(t.headers),url:t.url,data:n,method:r})}},{key:"request",value:function(t){return e.interceptors.request.dispatch(t),Y(t).then(function(t){return e.interceptors.response.dispatch(t),t.ok?t:Promise.reject(t)})}}]),e}();Xe.interceptors={request:new ze,response:new ze},Xe.interceptors.request.add(J),Xe.interceptors.request.add(G),Xe.interceptors.response.add(X),Xe.interceptors.request.add($),Xe.interceptors.response.add(K),Xe.interceptors.response.add(Q);var $e=["area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"],Ke=["script"],Qe=void 0,We=void 0,Ye=void 0,Ze=void 0;ue();var et={html:"http://www.w3.org/1999/xhtml",svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink"},tt={version:"0.1.14",util:je,vdom:Te,url:qe,Observer:Me,Bind:Le,Store:Be,Http:Xe,parse:ae,compile:me,clone:we,transclude:ke};return tt});